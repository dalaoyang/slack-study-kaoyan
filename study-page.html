
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            position: relative;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        header h1:hover {
            transform: scale(1.05);
        }

        .subject-selector {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .subject-selector::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .subject-selector:hover::before {
            animation: shine 0.5s ease-in-out;
        }

        @keyframes shine {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
                opacity: 0;
            }
        }

        .subject-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .subject-tab {
            padding: 12px 24px;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .subject-tab::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .subject-tab:hover::after {
            width: 300px;
            height: 300px;
        }

        .subject-tab.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .subject-tab:hover:not(.active) {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
        }

        .exam-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
            transition: color 0.3s;
        }

        .stat-card:hover .stat-value {
            color: #5a67d8;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .question-area {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            transition: all 0.3s;
        }

        .question-area:hover {
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .question-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-badge {
            background: #e6fffa;
            color: #234e52;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: normal;
        }

        .question-timer {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            color: #ed8936;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .question-timer:hover {
            transform: scale(1.05);
        }

        .timer-icon {
            animation: pulse 2s infinite;
            font-size: 1.3rem;
        }

        @keyframes pulse {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        .question-content {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            position: relative;
            transition: all 0.3s;
        }

        .question-content:hover {
            background: #e6fffa;
            transform: translateX(5px);
        }

        .question-options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            padding: 15px 20px;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.3s;
        }

        .option:hover:not(.selected):not(.correct):not(.incorrect)::before {
            left: 100%;
        }

        .option:hover:not(.selected):not(.correct):not(.incorrect) {
            border-color: #667eea;
            background: #e6fffa;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
            animation: selectPulse 0.5s ease;
        }

        @keyframes selectPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .option.correct {
            border-color: #48bb78;
            background: #48bb78;
            color: white;
            animation: correctBounce 0.6s ease;
        }

        @keyframes correctBounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .option.incorrect {
            border-color: #f56565;
            background: #f56565;
            color: white;
            animation: incorrectShake 0.6s ease;
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            transition: all 0.3s;
        }

        .option:hover .option-letter:not(.selected):not(.correct):not(.incorrect) {
            background: #667eea;
            color: white;
            transform: rotate(360deg);
        }

        .option.selected .option-letter,
        .option.correct .option-letter,
        .option.incorrect .option-letter {
            background: white;
            color: inherit;
        }

        .option-text {
            flex: 1;
        }

        .question-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .action-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .action-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .action-btn:active::after {
            width: 300px;
            height: 300px;
        }

        .submit-btn {
            background: #48bb78;
            color: white;
        }

        .submit-btn:hover {
            background: #38a169;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.3);
        }

        .next-btn {
            background: #667eea;
            color: white;
        }

        .next-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .skip-btn {
            background: #718096;
            color: white;
        }

        .skip-btn:hover {
            background: #4a5568;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(113, 128, 150, 0.3);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .progress-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .progress-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .progress-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-bar {
            background: #e2e8f0;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin-bottom: 10px;
            cursor: pointer;
            position: relative;
        }

        .progress-bar:hover .progress-fill {
            animation: progressGlow 1s ease-in-out infinite alternate;
        }

        @keyframes progressGlow {
            from { box-shadow: 0 0 5px rgba(102, 126, 234, 0.5); }
            to { box-shadow: 0 0 20px rgba(102, 126, 234, 0.8); }
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85rem;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .progress-stat {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .progress-stat:hover {
            background: #e6fffa;
            transform: scale(1.05);
        }

        .progress-stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }

        .progress-stat-label {
            font-size: 0.85rem;
            color: #666;
        }

        .question-nav {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .nav-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-filter {
            display: flex;
            gap: 10px;
        }

        .nav-filter-btn {
            padding: 4px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 15px;
            background: none;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .nav-filter-btn:hover {
            border-color: #667eea;
            color: #667eea;
        }

        .nav-filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            padding: 5px;
        }

        .nav-item {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            position: relative;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 8px;
            background: inherit;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        .nav-item:hover::before {
            opacity: 0.1;
        }

        .nav-item:hover {
            transform: scale(1.1) rotate(5deg);
            z-index: 1;
        }

        .nav-item.current {
            background: #667eea;
            color: white;
            border-color: #667eea;
            animation: currentPulse 2s infinite;
        }

        @keyframes currentPulse {
            0% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(102, 126, 234, 0); }
            100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0); }
        }

        .nav-item.answered {
            background: #48bb78;
            color: white;
            border-color: #48bb78;
        }

        .nav-item.answered:hover {
            background: #38a169;
            border-color: #38a169;
        }

        .nav-item.skipped {
            background: #ed8936;
            color: white;
            border-color: #ed8936;
        }

        .nav-item.skipped:hover {
            background: #dd6b20;
            border-color: #dd6b20;
        }

        .wrong-book {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .wrong-book::before {
            content: 'üìö';
            position: absolute;
            right: -20px;
            bottom: -20px;
            font-size: 100px;
            opacity: 0.1;
            transform: rotate(-15deg);
        }

        .wrong-book:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .wrong-book:hover::before {
            animation: bookFloat 2s ease-in-out infinite;
        }

        @keyframes bookFloat {
            0%, 100% { transform: rotate(-15deg) translateY(0); }
            50% { transform: rotate(-15deg) translateY(-10px); }
        }

        .wrong-book-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #f56565;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 1;
        }

        .wrong-book-count {
            background: #f56565;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.85rem;
            animation: countBounce 2s infinite;
        }

        @keyframes countBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .wrong-book-preview {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .result-content {
            background: white;
            border-radius: 15px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            animation: resultSlideIn 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .result-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            animation: resultRotate 20s linear infinite;
        }

        @keyframes resultRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes resultSlideIn {
            from {
                transform: translateY(-50px) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .result-title {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .result-stat {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .result-stat:hover {
            transform: translateY(-5px);
            background: #e6fffa;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .result-stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .result-stat-label {
            color: #666;
        }

        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .analysis-btn {
            background: #667eea;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .analysis-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .restart-btn {
            background: #48bb78;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .restart-btn:hover {
            background: #38a169;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.3);
        }

        .explanation {
            margin-top: 20px;
            padding: 20px;
            background: #e6fffa;
            border-radius: 10px;
            border-left: 4px solid #48bb78;
            display: none;
            position: relative;
            overflow: hidden;
        }

        .explanation.show {
            display: block;
            animation: explanationSlideIn 0.5s ease;
        }

        @keyframes explanationSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .explanation::before {
            content: 'üí°';
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 2rem;
            opacity: 0.3;
        }

        .explanation-title {
            font-weight: bold;
            color: #48bb78;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-content {
            color: #234e52;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .difficulty-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-left: 10px;
            font-size: 0.9rem;
        }

        .difficulty-star {
            color: #ed8936;
            transition: all 0.3s;
            cursor: pointer;
        }

        .difficulty-star:hover {
            transform: scale(1.2) rotate(72deg);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 2000;
            animation: notificationSlideIn 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes notificationSlideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification:hover {
            transform: translateX(-5px);
        }

        .notification.success {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .notification.error {
            background: linear-gradient(135deg, #f56565, #e53e3e);
        }

        .notification.warning {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
        }

        .notification.info {
            background: linear-gradient(135deg, #4299e1, #3182ce);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Âø´Êç∑Â∑•ÂÖ∑Ê†è */
        .quick-tools {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 900;
        }

        .quick-tool {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.9);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            position: relative;
        }

        .quick-tool:hover {
            transform: scale(1.1) rotate(10deg);
            background: white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .quick-tool::after {
            content: attr(data-tooltip);
            position: absolute;
            right: 60px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.85rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .quick-tool:hover::after {
            opacity: 1;
        }

        /* ÈîÆÁõòÂø´Êç∑ÈîÆÊèêÁ§∫ */
        .keyboard-hint {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.85rem;
            color: #666;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* ÊµÆÂä®Á≤íÂ≠êËÉåÊôØ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.5);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            from {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            to {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Á≠îÈ¢òÊ≠£Á°Æ/ÈîôËØØÁâπÊïà */
        .answer-effect {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            font-weight: bold;
            z-index: 1500;
            pointer-events: none;
            animation: answerEffectPop 1s ease-out forwards;
        }

        @keyframes answerEffectPop {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.5);
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

        /* ËøõÂ∫¶ÁéØ */
        .progress-ring {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 80px;
            height: 80px;
            z-index: 1000;
        }

        .progress-ring svg {
            transform: rotate(-90deg);
        }

        .progress-ring-circle {
            fill: none;
            stroke: #e2e8f0;
            stroke-width: 8;
        }

        .progress-ring-progress {
            fill: none;
            stroke: #667eea;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
        }

        .progress-ring-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }
    

							</style>
                        </head>
                        <body>
                            <!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ËÄÉÁ†îÂÅöÈ¢òÁ≥ªÁªü - ‰∏ìÈ°πÁ™ÅÁ†¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            position: relative;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        header h1:hover {
            transform: scale(1.05);
        }

        .subject-selector {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .subject-selector::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .subject-selector:hover::before {
            animation: shine 0.5s ease-in-out;
        }

        @keyframes shine {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
                opacity: 0;
            }
        }

        .subject-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .subject-tab {
            padding: 12px 24px;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .subject-tab::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .subject-tab:hover::after {
            width: 300px;
            height: 300px;
        }

        .subject-tab.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .subject-tab:hover:not(.active) {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
        }

        .exam-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
            transition: color 0.3s;
        }

        .stat-card:hover .stat-value {
            color: #5a67d8;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .question-area {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            transition: all 0.3s;
        }

        .question-area:hover {
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .question-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-badge {
            background: #e6fffa;
            color: #234e52;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: normal;
        }

        .question-timer {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            color: #ed8936;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .question-timer:hover {
            transform: scale(1.05);
        }

        .timer-icon {
            animation: pulse 2s infinite;
            font-size: 1.3rem;
        }

        @keyframes pulse {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        .question-content {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            position: relative;
            transition: all 0.3s;
        }

        .question-content:hover {
            background: #e6fffa;
            transform: translateX(5px);
        }

        .question-options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            padding: 15px 20px;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.3s;
        }

        .option:hover:not(.selected):not(.correct):not(.incorrect)::before {
            left: 100%;
        }

        .option:hover:not(.selected):not(.correct):not(.incorrect) {
            border-color: #667eea;
            background: #e6fffa;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
            animation: selectPulse 0.5s ease;
        }

        @keyframes selectPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .option.correct {
            border-color: #48bb78;
            background: #48bb78;
            color: white;
            animation: correctBounce 0.6s ease;
        }

        @keyframes correctBounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .option.incorrect {
            border-color: #f56565;
            background: #f56565;
            color: white;
            animation: incorrectShake 0.6s ease;
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            transition: all 0.3s;
        }

        .option:hover .option-letter:not(.selected):not(.correct):not(.incorrect) {
            background: #667eea;
            color: white;
            transform: rotate(360deg);
        }

        .option.selected .option-letter,
        .option.correct .option-letter,
        .option.incorrect .option-letter {
            background: white;
            color: inherit;
        }

        .option-text {
            flex: 1;
        }

        .question-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .action-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .action-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .action-btn:active::after {
            width: 300px;
            height: 300px;
        }

        .submit-btn {
            background: #48bb78;
            color: white;
        }

        .submit-btn:hover {
            background: #38a169;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.3);
        }

        .next-btn {
            background: #667eea;
            color: white;
        }

        .next-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .skip-btn {
            background: #718096;
            color: white;
        }

        .skip-btn:hover {
            background: #4a5568;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(113, 128, 150, 0.3);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .progress-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .progress-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .progress-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-bar {
            background: #e2e8f0;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin-bottom: 10px;
            cursor: pointer;
            position: relative;
        }

        .progress-bar:hover .progress-fill {
            animation: progressGlow 1s ease-in-out infinite alternate;
        }

        @keyframes progressGlow {
            from { box-shadow: 0 0 5px rgba(102, 126, 234, 0.5); }
            to { box-shadow: 0 0 20px rgba(102, 126, 234, 0.8); }
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85rem;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .progress-stat {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .progress-stat:hover {
            background: #e6fffa;
            transform: scale(1.05);
        }

        .progress-stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }

        .progress-stat-label {
            font-size: 0.85rem;
            color: #666;
        }

        .question-nav {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .nav-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-filter {
            display: flex;
            gap: 10px;
        }

        .nav-filter-btn {
            padding: 4px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 15px;
            background: none;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .nav-filter-btn:hover {
            border-color: #667eea;
            color: #667eea;
        }

        .nav-filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            padding: 5px;
        }

        .nav-item {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            position: relative;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 8px;
            background: inherit;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        .nav-item:hover::before {
            opacity: 0.1;
        }

        .nav-item:hover {
            transform: scale(1.1) rotate(5deg);
            z-index: 1;
        }

        .nav-item.current {
            background: #667eea;
            color: white;
            border-color: #667eea;
            animation: currentPulse 2s infinite;
        }

        @keyframes currentPulse {
            0% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(102, 126, 234, 0); }
            100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0); }
        }

        .nav-item.answered {
            background: #48bb78;
            color: white;
            border-color: #48bb78;
        }

        .nav-item.answered:hover {
            background: #38a169;
            border-color: #38a169;
        }

        .nav-item.skipped {
            background: #ed8936;
            color: white;
            border-color: #ed8936;
        }

        .nav-item.skipped:hover {
            background: #dd6b20;
            border-color: #dd6b20;
        }

        .wrong-book {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .wrong-book::before {
            content: 'üìö';
            position: absolute;
            right: -20px;
            bottom: -20px;
            font-size: 100px;
            opacity: 0.1;
            transform: rotate(-15deg);
        }

        .wrong-book:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .wrong-book:hover::before {
            animation: bookFloat 2s ease-in-out infinite;
        }

        @keyframes bookFloat {
            0%, 100% { transform: rotate(-15deg) translateY(0); }
            50% { transform: rotate(-15deg) translateY(-10px); }
        }

        .wrong-book-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #f56565;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 1;
        }

        .wrong-book-count {
            background: #f56565;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.85rem;
            animation: countBounce 2s infinite;
        }

        @keyframes countBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .wrong-book-preview {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .result-content {
            background: white;
            border-radius: 15px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            animation: resultSlideIn 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .result-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            animation: resultRotate 20s linear infinite;
        }

        @keyframes resultRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes resultSlideIn {
            from {
                transform: translateY(-50px) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .result-title {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .result-stat {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .result-stat:hover {
            transform: translateY(-5px);
            background: #e6fffa;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .result-stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .result-stat-label {
            color: #666;
        }

        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .analysis-btn {
            background: #667eea;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .analysis-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .restart-btn {
            background: #48bb78;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .restart-btn:hover {
            background: #38a169;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.3);
        }

        .explanation {
            margin-top: 20px;
            padding: 20px;
            background: #e6fffa;
            border-radius: 10px;
            border-left: 4px solid #48bb78;
            display: none;
            position: relative;
            overflow: hidden;
        }

        .explanation.show {
            display: block;
            animation: explanationSlideIn 0.5s ease;
        }

        @keyframes explanationSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .explanation::before {
            content: 'üí°';
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 2rem;
            opacity: 0.3;
        }

        .explanation-title {
            font-weight: bold;
            color: #48bb78;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-content {
            color: #234e52;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .difficulty-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-left: 10px;
            font-size: 0.9rem;
        }

        .difficulty-star {
            color: #ed8936;
            transition: all 0.3s;
            cursor: pointer;
        }

        .difficulty-star:hover {
            transform: scale(1.2) rotate(72deg);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 2000;
            animation: notificationSlideIn 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes notificationSlideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification:hover {
            transform: translateX(-5px);
        }

        .notification.success {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .notification.error {
            background: linear-gradient(135deg, #f56565, #e53e3e);
        }

        .notification.warning {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
        }

        .notification.info {
            background: linear-gradient(135deg, #4299e1, #3182ce);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Âø´Êç∑Â∑•ÂÖ∑Ê†è */
        .quick-tools {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 900;
        }

        .quick-tool {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.9);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            position: relative;
        }

        .quick-tool:hover {
            transform: scale(1.1) rotate(10deg);
            background: white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .quick-tool::after {
            content: attr(data-tooltip);
            position: absolute;
            right: 60px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.85rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .quick-tool:hover::after {
            opacity: 1;
        }

        /* ÈîÆÁõòÂø´Êç∑ÈîÆÊèêÁ§∫ */
        .keyboard-hint {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.85rem;
            color: #666;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* ÊµÆÂä®Á≤íÂ≠êËÉåÊôØ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.5);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            from {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            to {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Á≠îÈ¢òÊ≠£Á°Æ/ÈîôËØØÁâπÊïà */
        .answer-effect {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            font-weight: bold;
            z-index: 1500;
            pointer-events: none;
            animation: answerEffectPop 1s ease-out forwards;
        }

        @keyframes answerEffectPop {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.5);
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

        /* ËøõÂ∫¶ÁéØ */
        .progress-ring {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 80px;
            height: 80px;
            z-index: 1000;
        }

        .progress-ring svg {
            transform: rotate(-90deg);
        }

        .progress-ring-circle {
            fill: none;
            stroke: #e2e8f0;
            stroke-width: 8;
        }

        .progress-ring-progress {
            fill: none;
            stroke: #667eea;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
        }

        .progress-ring-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }
    </style>
</head>
<body>
    <!-- ÊµÆÂä®Á≤íÂ≠êËÉåÊôØ -->
    <div class="particles" id="particles"></div>

    <!-- ËøõÂ∫¶ÁéØ -->
    <div class="progress-ring">
        <svg width="80" height="80">
            <circle class="progress-ring-circle" cx="40" cy="40" r="32"></circle>
            <circle class="progress-ring-progress" cx="40" cy="40" r="32" 
                    stroke-dasharray="201" stroke-dashoffset="201"></circle>
        </svg>
        <div class="progress-ring-text" id="progressRingText">0%</div>
    </div>

    <!-- ÈîÆÁõòÂø´Êç∑ÈîÆÊèêÁ§∫ -->
    <div class="keyboard-hint">
        Âø´Êç∑ÈîÆÔºöA/B/C/D - ÈÄâÊã©Á≠îÊ°à | Enter - Êèê‰∫§ | Space - ‰∏ã‰∏ÄÈ¢ò | ‚Üê ‚Üí - ÂàáÊç¢È¢òÁõÆ
    </div>

    <!-- Âø´Êç∑Â∑•ÂÖ∑Ê†è -->
    <div class="quick-tools">
        <button class="quick-tool" data-tooltip="ËøîÂõûÈ°∂ÈÉ®" onclick="scrollToTop()">‚Üë</button>
        <button class="quick-tool" data-tooltip="ËÆæÁΩÆ" onclick="openSettings()">‚öôÔ∏è</button>
        <button class="quick-tool" data-tooltip="Â∏ÆÂä©" onclick="showHelp()">‚ùì</button>
    </div>

    <div class="container">
        <header>
            <h1 onclick="playTitleAnimation()">üìö ËÄÉÁ†îÂÅöÈ¢òÁ≥ªÁªü</h1>
            <p>‰∏ìÈ°πÁ™ÅÁ†¥ÔºåÁ≤æÂáÜÊèêÂàÜ - ÊØè‰∏ÄÈÅìÈ¢òÈÉΩÊòØËøõÊ≠•ÁöÑÈò∂Ê¢Ø</p>
        </header>

        <div class="subject-selector">
            <div class="subject-tabs">
                <div class="subject-tab active" onclick="selectSubject('math', event)">Êï∞Â≠¶</div>
                <div class="subject-tab" onclick="selectSubject('english', event)">Ëã±ËØ≠</div>
                <div class="subject-tab" onclick="selectSubject('politics', event)">ÊîøÊ≤ª</div>
                <div class="subject-tab" onclick="selectSubject('professional', event)">‰∏ì‰∏öËØæ</div>
            </div>
        </div>

        <div class="exam-stats">
            <div class="stat-card" onclick="showStatsDetail('accuracy', event)">
                <div class="stat-value" id="accuracy">0%</div>
                <div class="stat-label">Ê≠£Á°ÆÁéá</div>
            </div>
            <div class="stat-card" onclick="showStatsDetail('speed', event)">
                <div class="stat-value" id="avgTime">0Áßí</div>
                <div class="stat-label">Âπ≥ÂùáÁî®Êó∂</div>
            </div>
            <div class="stat-card" onclick="showStatsDetail('streak', event)">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">ËøûÁª≠Ê≠£Á°Æ</div>
            </div>
            <div class="stat-card" onclick="showStatsDetail('wrong', event)">
                <div class="stat-value" id="wrongCount">0</div>
                <div class="stat-label">ÈîôÈ¢òÊï∞Èáè</div>
            </div>
        </div>

        <div class="main-content">
            <div class="question-area">
                <div class="question-header">
                    <div class="question-number">
                        Á¨¨ <span id="currentQuestion">1</span> È¢ò / ÂÖ± <span id="totalQuestions">20</span> È¢ò
                        <span class="question-badge" id="questionBadge">Êñ∞È¢ò</span>
                    </div>
                    <div class="question-timer" onclick="toggleTimer()">
                        <span class="timer-icon">‚è±Ô∏è</span>
                        <span id="timer">00:00</span>
                    </div>
                </div>

                <div class="question-content" id="questionContent" onclick="readQuestion()">
                    Â∑≤Áü•ÂáΩÊï∞ f(x) = x¬≥ - 3x¬≤ + 2ÔºåÊ±Ç f'(x) Âú® x = 1 Â§ÑÁöÑÂØºÊï∞ÂÄº„ÄÇ
                </div>

                <div class="difficulty-indicator">
                    <span>ÈöæÂ∫¶Ôºö</span>
                    <span class="difficulty-star" onclick="rateDifficulty(1)">‚òÖ</span>
                    <span class="difficulty-star" onclick="rateDifficulty(2)">‚òÖ</span>
                    <span class="difficulty-star" onclick="rateDifficulty(3)">‚òÖ</span>
                    <span class="difficulty-star" onclick="rateDifficulty(4)">‚òÖ</span>
                    <span class="difficulty-star" onclick="rateDifficulty(5)">‚òÖ</span>
                </div>

                <div class="question-options" id="questionOptions">
                    <div class="option" onclick="selectOption(this, 'A', event)">
                        <div class="option-letter">A</div>
                        <div class="option-text">-3</div>
                    </div>
                    <div class="option" onclick="selectOption(this, 'B', event)">
                        <div class="option-letter">B</div>
                        <div class="option-text">-2</div>
                    </div>
                    <div class="option" onclick="selectOption(this, 'C', event)">
                        <div class="option-letter">C</div>
                        <div class="option-text">0</div>
                    </div>
                    <div class="option" onclick="selectOption(this, 'D', event)">
                        <div class="option-letter">D</div>
                        <div class="option-text">3</div>
                    </div>
                </div>

                <div class="explanation" id="explanation">
                    <div class="explanation-title">
                        <span>üìù</span>
                        <span>Ëß£Êûê</span>
                        <button onclick="toggleExplanation()" style="float: right; background: none; border: none; cursor: pointer; font-size: 1.2rem;">üìã</button>
                    </div>
                    <div class="explanation-content" id="explanationContent">
                        È¶ñÂÖàÊ±ÇÂØºÔºöf'(x) = 3x¬≤ - 6x<br>
                        ‰ª£ÂÖ• x = 1Ôºöf'(1) = 3(1)¬≤ - 6(1) = 3 - 6 = -3<br>
                        Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ
                    </div>
                </div>

                <div class="question-actions">
                    <button class="action-btn submit-btn" onclick="submitAnswer()">Êèê‰∫§Á≠îÊ°à</button>
                    <button class="action-btn next-btn" onclick="nextQuestion()" style="display: none;">‰∏ã‰∏ÄÈ¢ò</button>
                    <button class="action-btn skip-btn" onclick="skipQuestion()">Ë∑≥Ëøá</button>
                    <button class="action-btn" onclick="markQuestion()" style="background: #ed8936; color: white;">Ê†áËÆ∞</button>
                </div>
            </div>

            <div class="sidebar">
                <div class="progress-card">
                    <div class="progress-title">
                        <span>üìä</span>
                        <span>ÂÅöÈ¢òËøõÂ∫¶</span>
                    </div>
                    <div class="progress-bar" onclick="showProgressDetail()">
                        <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
                    </div>
                    <div class="progress-stats">
                        <div class="progress-stat" onclick="showAnsweredDetail()">
                            <div class="progress-stat-value" id="answeredCount">0</div>
                            <div class="progress-stat-label">Â∑≤Á≠îÈ¢ò</div>
                        </div>
                        <div class="progress-stat" onclick="showRemainingDetail()">
                            <div class="progress-stat-value" id="remainingCount">20</div>
                            <div class="progress-stat-label">Ââ©‰ΩôÈ¢ò</div>
                        </div>
                    </div>
                </div>

                <div class="question-nav">
                    <div class="nav-title">
                        <span>üó∫Ô∏è</span>
                        <span>È¢òÁõÆÂØºËà™</span>
                        <div class="nav-filter">
                            <button class="nav-filter-btn active" onclick="filterQuestions('all', event)">ÂÖ®ÈÉ®</button>
                            <button class="nav-filter-btn" onclick="filterQuestions('answered', event)">Â∑≤Á≠î</button>
                            <button class="nav-filter-btn" onclick="filterQuestions('skipped', event)">Ë∑≥Ëøá</button>
                        </div>
                    </div>
                    <div class="nav-grid" id="navGrid">
                        <!-- Âä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>

                <div class="wrong-book" onclick="openWrongBook()">
                    <div class="wrong-book-title">
                        <span>üìñ</span>
                        <span>ÈîôÈ¢òÊú¨</span>
                        <span class="wrong-book-count" id="wrongBookCount">0</span>
                    </div>
                    <div class="wrong-book-preview">
                        Êî∂ÈõÜÂÅöÈîôÁöÑÈ¢òÁõÆÔºåÊñπ‰æøÂ§ç‰π†Â∑©Âõ∫
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="result-modal" id="resultModal">
        <div class="result-content">
            <h2 class="result-title">üéâ ÊµãËØïÂÆåÊàêÔºÅ</h2>
            <div class="result-stats">
                <div class="result-stat" onclick="showResultDetail('accuracy')">
                    <div class="result-stat-value" id="finalAccuracy">0%</div>
                    <div class="result-stat-label">Ê≠£Á°ÆÁéá</div>
                </div>
                <div class="result-stat" onclick="showResultDetail('time')">
                    <div class="result-stat-value" id="finalTime">0:00</div>
                    <div class="result-stat-label">ÊÄªÁî®Êó∂</div>
                </div>
                <div class="result-stat" onclick="showResultDetail('correct')">
                    <div class="result-stat-value" id="finalCorrect">0</div>
                    <div class="result-stat-label">Ê≠£Á°ÆÈ¢òÊï∞</div>
                </div>
                <div class="result-stat" onclick="showResultDetail('wrong')">
                    <div class="result-stat-value" id="finalWrong">0</div>
                    <div class="result-stat-label">ÈîôËØØÈ¢òÊï∞</div>
                </div>
            </div>
            <div class="result-actions">
                <button class="analysis-btn" onclick="showAnalysis()">Êü•ÁúãÂàÜÊûê</button>
                <button class="restart-btn" onclick="restartExam()">ÈáçÊñ∞ÂºÄÂßã</button>
            </div>
        </div>
    </div>

    <script>
        // È¢òÂ∫ìÊï∞ÊçÆ
        const questionBank = {
            math: [
                {
                    id: 1,
                    content: "Â∑≤Áü•ÂáΩÊï∞ f(x) = x¬≥ - 3x¬≤ + 2ÔºåÊ±Ç f'(x) Âú® x = 1 Â§ÑÁöÑÂØºÊï∞ÂÄº„ÄÇ",
                    options: ["-3", "-2", "0", "3"],
                    correct: "A",
                    explanation: "È¶ñÂÖàÊ±ÇÂØºÔºöf'(x) = 3x¬≤ - 6x<br>‰ª£ÂÖ• x = 1Ôºöf'(1) = 3(1)¬≤ - 6(1) = 3 - 6 = -3<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 3,
                    tags: ["ÂØºÊï∞", "ÂáΩÊï∞", "ËÆ°ÁÆó"]
                },
                {
                    id: 2,
                    content: "ËÆ°ÁÆóÂÆöÁßØÂàÜ ‚à´‚ÇÄ¬π x¬≤ dx ÁöÑÂÄº„ÄÇ",
                    options: ["1/3", "1/2", "2/3", "1"],
                    correct: "A",
                    explanation: "‚à´‚ÇÄ¬π x¬≤ dx = [x¬≥/3]‚ÇÄ¬π = 1¬≥/3 - 0¬≥/3 = 1/3<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 2,
                    tags: ["ÁßØÂàÜ", "ÂÆöÁßØÂàÜ", "ËÆ°ÁÆó"]
                },
                {
                    id: 3,
                    content: "Áü©Èòµ A = [[2, 1], [1, 2]]ÔºåÊ±Ç A ÁöÑÁâπÂæÅÂÄº„ÄÇ",
                    options: ["1, 3", "2, 2", "0, 4", "1, 1"],
                    correct: "A",
                    explanation: "ÁâπÂæÅÊñπÁ®ãÔºö|A - ŒªI| = 0<br>|2-Œª, 1; 1, 2-Œª| = (2-Œª)¬≤ - 1 = Œª¬≤ - 4Œª + 3 = 0<br>Ëß£ÂæóÔºöŒª = 1 Êàñ Œª = 3<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 4,
                    tags: ["Áü©Èòµ", "ÁâπÂæÅÂÄº", "Á∫øÊÄß‰ª£Êï∞"]
                },
                {
                    id: 4,
                    content: "Ê±ÇÊûÅÈôê lim(x‚Üí0) (sin x / x) ÁöÑÂÄº„ÄÇ",
                    options: ["0", "1", "‚àû", "‰∏çÂ≠òÂú®"],
                    correct: "B",
                    explanation: "ËøôÊòØ‰∏Ä‰∏™ÈáçË¶ÅÊûÅÈôêÔºålim(x‚Üí0) (sin x / x) = 1<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ B„ÄÇ",
                    difficulty: 2,
                    tags: ["ÊûÅÈôê", "ÈáçË¶ÅÊûÅÈôê", "ËÆ°ÁÆó"]
                },
                {
                    id: 5,
                    content: "Â∑≤Áü•ÂêëÈáè a = (1, 2, 3)Ôºåb = (4, 5, 6)ÔºåÊ±Ç a¬∑b ÁöÑÂÄº„ÄÇ",
                    options: ["20", "25", "30", "32"],
                    correct: "D",
                    explanation: "ÁÇπÁßØÂÖ¨ÂºèÔºöa¬∑b = a‚ÇÅb‚ÇÅ + a‚ÇÇb‚ÇÇ + a‚ÇÉb‚ÇÉ<br>a¬∑b = 1√ó4 + 2√ó5 + 3√ó6 = 4 + 10 + 18 = 32<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ D„ÄÇ",
                    difficulty: 1,
                    tags: ["ÂêëÈáè", "ÁÇπÁßØ", "ËÆ°ÁÆó"]
                }
            ],
            english: [
                {
                    id: 6,
                    content: "Choose the correct word to complete the sentence: The weather is ______ today.",
                    options: ["nice", "nicely", "nicer", "nicest"],
                    correct: "A",
                    explanation: "Á≥ªÂä®ËØç be ÂêéÈù¢ÈúÄË¶ÅÂΩ¢ÂÆπËØç‰ΩúË°®ËØ≠Ôºånice ÊòØÂΩ¢ÂÆπËØçÔºånicely ÊòØÂâØËØç„ÄÇ<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 1,
                    tags: ["ËØçÊ±á", "ËØ≠Ê≥ï", "ÂΩ¢ÂÆπËØç"]
                },
                {
                    id: 7,
                    content: "Which sentence is grammatically correct?",
                    options: [
                        "She don't like coffee.",
                        "She doesn't like coffee.",
                        "She doesn't likes coffee.",
                        "She don't likes coffee."
                    ],
                    correct: "B",
                    explanation: "Á¨¨‰∏â‰∫∫Áß∞ÂçïÊï∞Áî® doesn'tÔºåÂêéÈù¢Êé•Âä®ËØçÂéüÂΩ¢„ÄÇ<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ B„ÄÇ",
                    difficulty: 2,
                    tags: ["ËØ≠Ê≥ï", "Á¨¨‰∏â‰∫∫Áß∞", "Âä®ËØç"]
                }
            ],
            politics: [
                {
                    id: 8,
                    content: "È©¨ÂÖãÊÄù‰∏ª‰πâÂì≤Â≠¶ÁöÑÊ†∏ÂøÉÊòØÔºàÔºâ„ÄÇ",
                    options: [
                        "Ëæ©ËØÅÂîØÁâ©‰∏ª‰πâ",
                        "ÂéÜÂè≤ÂîØÁâ©‰∏ª‰πâ",
                        "ÂÆûË∑µËÆ∫",
                        "ÁüõÁõæËÆ∫"
                    ],
                    correct: "A",
                    explanation: "È©¨ÂÖãÊÄù‰∏ª‰πâÂì≤Â≠¶ÁöÑÊ†∏ÂøÉÊòØËæ©ËØÅÂîØÁâ©‰∏ª‰πâÂíåÂéÜÂè≤ÂîØÁâ©‰∏ª‰πâÔºåÂÖ∂‰∏≠Ëæ©ËØÅÂîØÁâ©‰∏ª‰πâÊòØÂü∫Á°Ä„ÄÇ<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 2,
                    tags: ["È©¨ÂÖãÊÄù‰∏ª‰πâ", "Âì≤Â≠¶", "Ê†∏ÂøÉ"]
                }
            ],
            professional: [
                {
                    id: 9,
                    content: "ËÆ°ÁÆóÊú∫ÁßëÂ≠¶‰∏≠ÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n¬≤) ÁöÑÁÆóÊ≥ïÊòØÔºàÔºâ„ÄÇ",
                    options: [
                        "‰∫åÂàÜÊü•Êâæ",
                        "Âø´ÈÄüÊéíÂ∫è",
                        "ÂÜíÊ≥°ÊéíÂ∫è",
                        "ÂìàÂ∏åÊü•Êâæ"
                    ],
                    correct: "C",
                    explanation: "ÂÜíÊ≥°ÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n¬≤)ÔºåÊòØÂÖ∏ÂûãÁöÑÂπ≥ÊñπÁ∫ßÁÆóÊ≥ï„ÄÇ<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ C„ÄÇ",
                    difficulty: 3,
                    tags: ["ÁÆóÊ≥ï", "Êó∂Èó¥Â§çÊùÇÂ∫¶", "ÊéíÂ∫è"]
                }
            ]
        };

        // Â∫îÁî®Áä∂ÊÄÅ
        let currentSubject = 'math';
        let currentQuestionIndex = 0;
        let questions = [];
        let userAnswers = [];
        let selectedOption = null;
        let startTime = null;
        let timerInterval = null;
        let questionStartTime = null;
        let questionTimes = [];
        let wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions')) || [];
        let examStats = JSON.parse(localStorage.getItem('examStats')) || {};
        let markedQuestions = JSON.parse(localStorage.getItem('markedQuestions')) || [];
        let isTimerPaused = false;
        let currentFilter = 'all';

        // ÂàùÂßãÂåñ
        function init() {
            createParticles();
            loadQuestions();
            generateNavGrid();
            startTimer();
            updateStats();
            updateWrongBookCount();
            setupKeyboardShortcuts();
            updateProgressRing();
        }

        // ÂàõÂª∫ÊµÆÂä®Á≤íÂ≠ê
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Âä†ËΩΩÈ¢òÁõÆ
        function loadQuestions() {
            questions = [...questionBank[currentSubject]];
            document.getElementById('totalQuestions').textContent = questions.length;
            displayQuestion();
        }

        // ÈÄâÊã©ÁßëÁõÆ
        function selectSubject(subject, event) {
            // Ê∑ªÂä†ÁÇπÂáªÊ≥¢Á∫πÊïàÊûú
            createRipple(event);
            
            currentSubject = subject;
            document.querySelectorAll('.subject-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ÈáçÁΩÆÁä∂ÊÄÅ
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedOption = null;
            questionTimes = [];
            
            loadQuestions();
            generateNavGrid();
            resetTimer();
            updateProgress();
            updateProgressRing();
            
            showNotification(`Â∑≤ÂàáÊç¢Âà∞${getSubjectName(subject)}ÁßëÁõÆ`, 'success');
        }

        // Ëé∑ÂèñÁßëÁõÆÂêçÁß∞
        function getSubjectName(subject) {
            const names = {
                math: 'Êï∞Â≠¶',
                english: 'Ëã±ËØ≠',
                politics: 'ÊîøÊ≤ª',
                professional: '‰∏ì‰∏öËØæ'
            };
            return names[subject] || subject;
        }

        // ÂàõÂª∫ÁÇπÂáªÊ≥¢Á∫πÊïàÊûú
        function createRipple(event) {
            const button = event.currentTarget;
            const ripple = document.createElement('span');
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            button.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 600);
        }

        // ÊòæÁ§∫È¢òÁõÆ
        function displayQuestion() {
            if (currentQuestionIndex >= questions.length) {
                finishExam();
                return;
            }

            const question = questions[currentQuestionIndex];
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('questionContent').textContent = question.content;
            
            // Êõ¥Êñ∞È¢òÁõÆÊ†áÁ≠æ
            updateQuestionBadge();
            
            // ÊòæÁ§∫ÈÄâÈ°π
            const optionsContainer = document.getElementById('questionOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.onclick = (e) => selectOption(optionDiv, String.fromCharCode(65 + index), e);
                
                optionDiv.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionsContainer.appendChild(optionDiv);
            });

            // ÊòæÁ§∫ÈöæÂ∫¶
            updateDifficultyStars(question.difficulty);
            
            // ÈáçÁΩÆÁä∂ÊÄÅ
            selectedOption = null;
            document.getElementById('explanation').classList.remove('show');
            document.querySelector('.submit-btn').style.display = 'inline-block';
            document.querySelector('.next-btn').style.display = 'none';
            
            // Á¶ÅÁî®Â∑≤Á≠îÈ¢òÁõÆÁöÑÈÄâÈ°π
            if (userAnswers[currentQuestionIndex]) {
                disableOptions();
            }
            
            // ËÆ∞ÂΩïÂºÄÂßãÊó∂Èó¥
            questionStartTime = Date.now();
            
            // Êõ¥Êñ∞ÂØºËà™
            updateNavGrid();
            
            // ÊªöÂä®Âà∞È¢òÁõÆÈ°∂ÈÉ®
            document.querySelector('.question-area').scrollIntoView({ behavior: 'smooth' });
        }

        // Êõ¥Êñ∞È¢òÁõÆÊ†áÁ≠æ
        function updateQuestionBadge() {
            const badge = document.getElementById('questionBadge');
            const answer = userAnswers[currentQuestionIndex];
            
            if (answer) {
                if (answer.correct) {
                    badge.textContent = '‚úì Ê≠£Á°Æ';
                    badge.style.background = '#c6f6d5';
                    badge.style.color = '#22543d';
                } else {
                    badge.textContent = '‚úó ÈîôËØØ';
                    badge.style.background = '#fed7d7';
                    badge.style.color = '#742a2a';
                }
            } else if (markedQuestions.includes(currentQuestionIndex)) {
                badge.textContent = '‚≠ê Ê†áËÆ∞';
                badge.style.background = '#fef3c7';
                badge.style.color = '#92400e';
            } else {
                badge.textContent = 'Êñ∞È¢ò';
                badge.style.background = '#e6fffa';
                badge.style.color = '#234e52';
            }
        }

        // Êõ¥Êñ∞ÈöæÂ∫¶ÊòüÁ∫ß
        function updateDifficultyStars(difficulty) {
            const stars = document.querySelectorAll('.difficulty-star');
            stars.forEach((star, index) => {
                if (index < difficulty) {
                    star.style.color = '#ed8936';
                } else {
                    star.style.color = '#e2e8f0';
                }
            });
        }

        // ÈÄâÊã©ÈÄâÈ°π
        function selectOption(element, option, event) {
            if (userAnswers[currentQuestionIndex]) return; // Â∑≤Á≠îÈ¢òÁõÆ‰∏çËÉΩ‰øÆÊîπ
            
            createRipple(event);
            
            // Ê∑ªÂä†ÈÄâÊã©Èü≥ÊïàÊ®°Êãü
            playSelectSound();
            
            // Ê∏ÖÈô§‰πãÂâçÁöÑÈÄâÊã©
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Ê†áËÆ∞ÂΩìÂâçÈÄâÊã©
            element.classList.add('selected');
            selectedOption = option;
            
            // Ëá™Âä®Êèê‰∫§ÈÄâÈ°π
            if (localStorage.getItem('autoSubmit') === 'true') {
                setTimeout(() => submitAnswer(), 500);
            }
        }

        // Ê®°ÊãüÈÄâÊã©Èü≥Êïà
        function playSelectSound() {
            // ‰ΩøÁî® Web Audio API ÂàõÂª∫ÁÆÄÂçïÁöÑÈü≥Êïà
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            gainNode.gain.value = 0.1;
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        // Êèê‰∫§Á≠îÊ°à
        function submitAnswer() {
            if (!selectedOption) {
                showNotification('ËØ∑ÈÄâÊã©‰∏Ä‰∏™Á≠îÊ°à', 'warning');
                // ÈúáÂä®ÊèêÁ§∫
                if (navigator.vibrate) {
                    navigator.vibrate([200, 100, 200]);
                }
                return;
            }

            const question = questions[currentQuestionIndex];
            const isCorrect = selectedOption === question.correct;
            
            // ËÆ∞ÂΩïÁ≠îÊ°à
            userAnswers[currentQuestionIndex] = {
                answer: selectedOption,
                correct: isCorrect,
                time: Math.floor((Date.now() - questionStartTime) / 1000)
            };
            
            questionTimes.push(userAnswers[currentQuestionIndex].time);
            
            // ÊòæÁ§∫Ê≠£Á°ÆÁ≠îÊ°àÂíåËß£Êûê
            showAnswerResult(isCorrect);
            
            // Êõ¥Êñ∞ÁªüËÆ°
            updateExamStats(isCorrect);
            
            // Â¶ÇÊûúÁ≠îÈîôÔºåÂä†ÂÖ•ÈîôÈ¢òÊú¨
            if (!isCorrect) {
                addToWrongBook(currentQuestionIndex);
                playWrongSound();
            } else {
                playCorrectSound();
            }
            
            // Êõ¥Êñ∞ËøõÂ∫¶
            updateProgress();
            updateProgressRing();
            updateNavGrid();
        }

        // Êí≠ÊîæÊ≠£Á°ÆÈü≥Êïà
        function playCorrectSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 1000;
            gainNode.gain.value = 0.1;
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.2);
            
            // ÊòæÁ§∫Ê≠£Á°ÆÁâπÊïà
            showAnswerEffect('‚úÖ');
        }

        // Êí≠ÊîæÈîôËØØÈü≥Êïà
        function playWrongSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 300;
            gainNode.gain.value = 0.1;
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.3);
            
            // ÊòæÁ§∫ÈîôËØØÁâπÊïà
            showAnswerEffect('‚ùå');
        }

        // ÊòæÁ§∫Á≠îÈ¢òÁâπÊïà
        function showAnswerEffect(emoji) {
            const effect = document.createElement('div');
            effect.className = 'answer-effect';
            effect.textContent = emoji;
            document.body.appendChild(effect);
            
            setTimeout(() => effect.remove(), 1000);
        }

        // ÊòæÁ§∫Á≠îÊ°àÁªìÊûú
        function showAnswerResult(isCorrect) {
            const question = questions[currentQuestionIndex];
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, index) => {
                const optionLetter = String.fromCharCode(65 + index);
                option.onclick = null; // Á¶ÅÁî®ÁÇπÂáª
                
                setTimeout(() => {
                    if (optionLetter === question.correct) {
                        option.classList.add('correct');
                    } else if (optionLetter === selectedOption && selectedOption !== question.correct) {
                        option.classList.add('incorrect');
                    }
                }, 100);
            });
            
            // ÊòæÁ§∫Ëß£Êûê
            setTimeout(() => {
                document.getElementById('explanationContent').innerHTML = question.explanation;
                document.getElementById('explanation').classList.add('show');
            }, 500);
            
            // ÂàáÊç¢ÊåâÈíÆ
            setTimeout(() => {
                document.querySelector('.submit-btn').style.display = 'none';
                document.querySelector('.next-btn').style.display = 'inline-block';
            }, 1000);
            
            // Êõ¥Êñ∞È¢òÁõÆÊ†áÁ≠æ
            updateQuestionBadge();
        }

        // ‰∏ã‰∏ÄÈ¢ò
        function nextQuestion() {
            // Ê∑ªÂä†ÂàáÊç¢Âä®Áîª
            const questionArea = document.querySelector('.question-area');
            questionArea.style.opacity = '0';
            questionArea.style.transform = 'translateX(50px)';
            
            setTimeout(() => {
                currentQuestionIndex++;
                displayQuestion();
                questionArea.style.opacity = '1';
                questionArea.style.transform = 'translateX(0)';
            }, 300);
        }

        // Ë∑≥ËøáÈ¢òÁõÆ
        function skipQuestion() {
            userAnswers[currentQuestionIndex] = {
                answer: null,
                correct: false,
                skipped: true,
                time: Math.floor((Date.now() - questionStartTime) / 1000)
            };
            
            questionTimes.push(userAnswers[currentQuestionIndex].time);
            
            // Ê†áËÆ∞‰∏∫Ë∑≥Ëøá
            const navItem = document.querySelectorAll('.nav-item')[currentQuestionIndex];
            navItem.classList.add('skipped');
            
            showNotification('È¢òÁõÆÂ∑≤Ë∑≥Ëøá', 'info');
            
            // Êõ¥Êñ∞ËøõÂ∫¶
            updateProgress();
            updateProgressRing();
            
            // ‰∏ã‰∏ÄÈ¢ò
            currentQuestionIndex++;
            displayQuestion();
        }

        // Ê†áËÆ∞È¢òÁõÆ
        function markQuestion() {
            const index = markedQuestions.indexOf(currentQuestionIndex);
            if (index > -1) {
                markedQuestions.splice(index, 1);
                showNotification('Â∑≤ÂèñÊ∂àÊ†áËÆ∞', 'info');
            } else {
                markedQuestions.push(currentQuestionIndex);
                showNotification('Â∑≤Ê†áËÆ∞È¢òÁõÆ', 'success');
            }
            
            localStorage.setItem('markedQuestions', JSON.stringify(markedQuestions));
            updateQuestionBadge();
        }

        // ÂàáÊç¢Ëß£ÊûêÊòæÁ§∫
        function toggleExplanation() {
            const explanation = document.getElementById('explanation');
            explanation.classList.toggle('show');
        }

        // ÁîüÊàêÈ¢òÁõÆÂØºËà™
        function generateNavGrid() {
            const navGrid = document.getElementById('navGrid');
            navGrid.innerHTML = '';
            
            questions.forEach((question, index) => {
                const navItem = document.createElement('div');
                navItem.className = 'nav-item';
                navItem.textContent = index + 1;
                navItem.onclick = () => jumpToQuestion(index);
                
                // Ê∑ªÂä†È¢òÁõÆÁ±ªÂûãÊ†áËÆ∞
                if (markedQuestions.includes(index)) {
                    navItem.title = 'Â∑≤Ê†áËÆ∞';
                }
                
                navGrid.appendChild(navItem);
            });
        }

        // Êõ¥Êñ∞È¢òÁõÆÂØºËà™
        function updateNavGrid() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach((item, index) => {
                item.classList.remove('current', 'answered', 'skipped');
                
                if (index === currentQuestionIndex) {
                    item.classList.add('current');
                } else if (userAnswers[index]) {
                    if (userAnswers[index].skipped) {
                        item.classList.add('skipped');
                    } else {
                        item.classList.add('answered');
                    }
                }
            });
            
            // Â∫îÁî®ËøáÊª§Âô®
            applyQuestionFilter();
        }

        // Â∫îÁî®È¢òÁõÆËøáÊª§Âô®
        function applyQuestionFilter() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach((item, index) => {
                switch(currentFilter) {
                    case 'answered':
                        if (!userAnswers[index] || userAnswers[index].skipped) {
                            item.style.display = 'none';
                        } else {
                            item.style.display = 'flex';
                        }
                        break;
                    case 'skipped':
                        if (!userAnswers[index] || !userAnswers[index].skipped) {
                            item.style.display = 'none';
                        } else {
                            item.style.display = 'flex';
                        }
                        break;
                    default:
                        item.style.display = 'flex';
                }
            });
        }

        // ËøáÊª§È¢òÁõÆ
        function filterQuestions(filter, event) {
            currentFilter = filter;
            
            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.nav-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Â∫îÁî®ËøáÊª§
            applyQuestionFilter();
        }

        // Ë∑≥ËΩ¨Âà∞ÊåáÂÆöÈ¢òÁõÆ
        function jumpToQuestion(index) {
            if (index >= 0 && index < questions.length) {
                // Ê∑ªÂä†Ë∑≥ËΩ¨Âä®Áîª
                const navItem = document.querySelectorAll('.nav-item')[index];
                navItem.style.transform = 'scale(1.3)';
                
                setTimeout(() => {
                    currentQuestionIndex = index;
                    displayQuestion();
                    navItem.style.transform = 'scale(1)';
                }, 200);
            }
        }

        // Êõ¥Êñ∞ËøõÂ∫¶
        function updateProgress() {
            const answered = userAnswers.filter(answer => answer !== undefined).length;
            const total = questions.length;
            const percentage = Math.round((answered / total) * 100);
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressFill').textContent = percentage + '%';
            document.getElementById('answeredCount').textContent = answered;
            document.getElementById('remainingCount').textContent = total - answered;
        }

        // Êõ¥Êñ∞ËøõÂ∫¶ÁéØ
        function updateProgressRing() {
            const answered = userAnswers.filter(answer => answer !== undefined).length;
            const total = questions.length;
            const percentage = answered / total;
            const circumference = 2 * Math.PI * 32;
            const offset = circumference - (percentage * circumference);
            
            const progressRing = document.querySelector('.progress-ring-progress');
            progressRing.style.strokeDashoffset = offset;
            document.getElementById('progressRingText').textContent = Math.round(percentage * 100) + '%';
        }

        // ÂàáÊç¢ËÆ°Êó∂Âô®
        function toggleTimer() {
            isTimerPaused = !isTimerPaused;
            
            if (isTimerPaused) {
                clearInterval(timerInterval);
                showNotification('ËÆ°Êó∂Âô®Â∑≤ÊöÇÂÅú', 'info');
            } else {
                startTimer();
                showNotification('ËÆ°Êó∂Âô®Â∑≤ÊÅ¢Â§ç', 'success');
            }
        }

        // ËÆ°Êó∂Âô®
        function startTimer() {
            if (!startTime) {
                startTime = Date.now();
            }
            
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            if (!startTime) return;
            
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            startTime = Date.now();
            isTimerPaused = false;
            startTimer();
        }

        // Êõ¥Êñ∞ËÄÉËØïÁªüËÆ°
        function updateExamStats(isCorrect) {
            if (!examStats[currentSubject]) {
                examStats[currentSubject] = {
                    total: 0,
                    correct: 0,
                    totalTime: 0,
                    streak: 0,
                    maxStreak: 0
                };
            }
            
            const stats = examStats[currentSubject];
            stats.total++;
            stats.totalTime += questionTimes[questionTimes.length - 1];
            
            if (isCorrect) {
                stats.correct++;
                stats.streak++;
                stats.maxStreak = Math.max(stats.maxStreak, stats.streak);
                
                // ËøûÁª≠Ê≠£Á°ÆÂ•ñÂä±
                if (stats.streak % 5 === 0) {
                    showNotification(`Â§™Ê£í‰∫ÜÔºÅËøûÁª≠Á≠îÂØπ${stats.streak}È¢òÔºÅüéâ`, 'success');
                }
            } else {
                stats.streak = 0;
            }
            
            localStorage.setItem('examStats', JSON.stringify(examStats));
            updateStats();
        }

        // Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆÊòæÁ§∫
        function updateStats() {
            const stats = examStats[currentSubject] || { total: 0, correct: 0, totalTime: 0, streak: 0, maxStreak: 0 };
            
            const accuracy = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
            const avgTime = stats.total > 0 ? Math.round(stats.totalTime / stats.total) : 0;
            
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('avgTime').textContent = avgTime + 'Áßí';
            document.getElementById('streak').textContent = stats.streak;
            document.getElementById('wrongCount').textContent = wrongQuestions.length;
        }

        // ÊòæÁ§∫ÁªüËÆ°ËØ¶ÊÉÖ
        function showStatsDetail(type, event) {
            createRipple(event);
            
            const messages = {
                accuracy: {
                    title: 'Ê≠£Á°ÆÁéáÂàÜÊûê',
                    content: `‰Ω†ÁöÑÂΩìÂâçÊ≠£Á°ÆÁéáÊòØ${document.getElementById('accuracy').textContent}„ÄÇÂª∫ËÆÆ‰øùÊåÅÂú®80%‰ª•‰∏äÔºå‰Ωé‰∫é60%ÈúÄË¶ÅÂä†Âº∫Âü∫Á°Ä„ÄÇ`
                },
                speed: {
                    title: 'Á≠îÈ¢òÈÄüÂ∫¶',
                    content: `Âπ≥ÂùáÁî®Êó∂${document.getElementById('avgTime').textContent}„ÄÇÁ≠îÈ¢òË¶ÅÂÖºÈ°æÂáÜÁ°ÆÁéáÔºå‰∏çË¶Å‰∏∫‰∫ÜÂø´ËÄåÁâ∫Áâ≤Ë¥®Èáè„ÄÇ`
                },
                streak: {
                    title: 'ËøûÁª≠Ê≠£Á°Æ',
                    content: `ËøûÁª≠Á≠îÂØπ${document.getElementById('streak').textContent}È¢òÔºÅ‰øùÊåÅËøô‰∏™Áä∂ÊÄÅÔºå‰Ω†Ë∂äÊù•Ë∂äÊ£í‰∫ÜÔºÅ`
                },
                wrong: {
                    title: 'ÈîôÈ¢òÁªüËÆ°',
                    content: `ÂÖ±Êúâ${document.getElementById('wrongCount').textContent}ÈÅìÈîôÈ¢ò„ÄÇÈîôÈ¢òÊòØËøõÊ≠•ÁöÑÈò∂Ê¢ØÔºåËÆ∞ÂæóÂÆöÊúüÂ§ç‰π†„ÄÇ`
                }
            };
            
            const detail = messages[type];
            showNotification(`${detail.title}Ôºö${detail.content}`, 'info');
        }

        // Ê∑ªÂä†Âà∞ÈîôÈ¢òÊú¨
        function addToWrongBook(questionIndex) {
            const question = questions[questionIndex];
            const wrongQuestion = {
                ...question,
                subject: currentSubject,
                wrongAnswer: selectedOption,
                wrongTime: new Date().toISOString()
            };
            
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤Â≠òÂú®
            const exists = wrongQuestions.some(q => q.id === wrongQuestion.id);
            if (!exists) {
                wrongQuestions.push(wrongQuestion);
                localStorage.setItem('wrongQuestions', JSON.stringify(wrongQuestions));
                updateWrongBookCount();
            }
        }

        // Êõ¥Êñ∞ÈîôÈ¢òÊú¨Êï∞Èáè
        function updateWrongBookCount() {
            const count = document.getElementById('wrongBookCount');
            count.textContent = wrongQuestions.length;
            
            // Ê∑ªÂä†Âä®ÁîªÊïàÊûú
            count.style.transform = 'scale(1.3)';
            setTimeout(() => {
                count.style.transform = 'scale(1)';
            }, 300);
        }

        // ÊâìÂºÄÈîôÈ¢òÊú¨
        function openWrongBook() {
            if (wrongQuestions.length === 0) {
                showNotification('ÈîôÈ¢òÊú¨‰∏∫Á©∫ÔºåÁªßÁª≠Âä†Ê≤πÔºÅ', 'info');
                return;
            }
            
            // ÊåâÁßëÁõÆÂàÜÁªÑÊòæÁ§∫ÈîôÈ¢ò
            const wrongBySubject = {};
            wrongQuestions.forEach(q => {
                if (!wrongBySubject[q.subject]) {
                    wrongBySubject[q.subject] = [];
                }
                wrongBySubject[q.subject].push(q);
            });
            
            let message = `ÈîôÈ¢òÊú¨ÂÖ±Êúâ${wrongQuestions.length}ÈÅìÈ¢òÔºö\n`;
            for (const [subject, questions] of Object.entries(wrongBySubject)) {
                message += `\n${getSubjectName(subject)}Ôºö${questions.length}ÈÅì`;
            }
            
            showNotification(message, 'warning');
        }

        // ÊòæÁ§∫ËøõÂ∫¶ËØ¶ÊÉÖ
        function showProgressDetail() {
            const answered = userAnswers.filter(answer => answer !== undefined).length;
            const total = questions.length;
            const remaining = total - answered;
            
            showNotification(`Â∑≤ÂÆåÊàê${answered}È¢òÔºåÂâ©‰Ωô${remaining}È¢òÔºåÂä†Ê≤πÔºÅ`, 'info');
        }

        // ÊòæÁ§∫Â∑≤Á≠îÈ¢òËØ¶ÊÉÖ
        function showAnsweredDetail() {
            const answered = userAnswers.filter(answer => answer && !answer.skipped);
            const correct = answered.filter(a => a.correct).length;
            
            showNotification(`Â∑≤Á≠î${answered.length}È¢òÔºåÊ≠£Á°Æ${correct}È¢ò`, 'success');
        }

        // ÊòæÁ§∫Ââ©‰ΩôÈ¢òËØ¶ÊÉÖ
        function showRemainingDetail() {
            const remaining = questions.length - userAnswers.filter(answer => answer !== undefined).length;
            
            showNotification(`ËøòÊúâ${remaining}È¢òÂæÖÂÆåÊàêÔºåÁªßÁª≠Âä†Ê≤πÔºÅ`, 'info');
        }

        // ÂÆåÊàêËÄÉËØï
        function finishExam() {
            clearInterval(timerInterval);
            
            const correct = userAnswers.filter(answer => answer && answer.correct).length;
            const total = userAnswers.filter(answer => answer !== undefined).length;
            const accuracy = total > 0 ? Math.round((correct / total) * 100) : 0;
            const totalTime = Math.floor((Date.now() - startTime) / 1000);
            
            // ‰øùÂ≠òÊú¨Ê¨°ËÄÉËØïËÆ∞ÂΩï
            const examRecord = {
                subject: currentSubject,
                date: new Date().toISOString(),
                total: total,
                correct: correct,
                accuracy: accuracy,
                time: totalTime
            };
            
            let examHistory = JSON.parse(localStorage.getItem('examHistory')) || [];
            examHistory.push(examRecord);
            localStorage.setItem('examHistory', JSON.stringify(examHistory));
            
            // ÊòæÁ§∫ÁªìÊûú
            document.getElementById('finalAccuracy').textContent = accuracy + '%';
            document.getElementById('finalTime').textContent = formatTime(totalTime);
            document.getElementById('finalCorrect').textContent = correct;
            document.getElementById('finalWrong').textContent = total - correct;
            
            // Êí≠ÊîæÂÆåÊàêÈü≥Êïà
            playFinishSound();
            
            setTimeout(() => {
                document.getElementById('resultModal').style.display = 'flex';
            }, 500);
        }

        // Êí≠ÊîæÂÆåÊàêÈü≥Êïà
        function playFinishSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const notes = [523, 659, 784, 1047]; // C, E, G, C
            
            notes.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = freq;
                gainNode.gain.value = 0.1;
                
                oscillator.start(audioContext.currentTime + index * 0.15);
                oscillator.stop(audioContext.currentTime + index * 0.15 + 0.2);
            });
        }

        // Ê†ºÂºèÂåñÊó∂Èó¥
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${minutes}:${secs.toString().padStart(2, '0')}`;
        }

        // ÊòæÁ§∫ÂàÜÊûê
        function showAnalysis() {
            showNotification('ËØ¶ÁªÜÂàÜÊûêÂäüËÉΩÂºÄÂèë‰∏≠...', 'info');
        }

        // ÈáçÊñ∞ÂºÄÂßã
        function restartExam() {
            document.getElementById('resultModal').style.display = 'none';
            
            // ÈáçÁΩÆÁä∂ÊÄÅ
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedOption = null;
            questionTimes = [];
            
            loadQuestions();
            generateNavGrid();
            resetTimer();
            updateProgress();
            updateProgressRing();
            
            showNotification('ËÄÉËØïÂ∑≤ÈáçÊñ∞ÂºÄÂßãÔºåÂä†Ê≤πÔºÅ', 'success');
        }

        // ÊòæÁ§∫ÁªìÊûúËØ¶ÊÉÖ
        function showResultDetail(type) {
            const messages = {
                accuracy: '‰Ω†ÁöÑÊ≠£Á°ÆÁéáÂèçÊò†‰∫ÜÁü•ËØÜÁöÑÊéåÊè°Á®ãÂ∫¶',
                time: 'ÊÄªÁî®Êó∂‰ΩìÁé∞‰∫Ü‰Ω†ÁöÑÁ≠îÈ¢òÊïàÁéá',
                correct: 'ÊØèÈÅìÊ≠£Á°ÆÁöÑÈ¢òÁõÆÈÉΩÊòØ‰Ω†ÁöÑËøõÊ≠•',
                wrong: 'ÈîôÈ¢òÊåáÊòé‰∫ÜÈúÄË¶ÅÂä†Âº∫ÁöÑÊñπÂêë'
            };
            
            showNotification(messages[type], 'info');
        }

        // ÈöæÂ∫¶ËØÑÂàÜ
        function rateDifficulty(rating) {
            const question = questions[currentQuestionIndex];
            question.difficulty = rating;
            
            // ‰øùÂ≠òËØÑÂàÜ
            let difficultyRatings = JSON.parse(localStorage.getItem('difficultyRatings')) || {};
            if (!difficultyRatings[currentSubject]) {
                difficultyRatings[currentSubject] = {};
            }
            difficultyRatings[currentSubject][question.id] = rating;
            localStorage.setItem('difficultyRatings', JSON.stringify(difficultyRatings));
            
            updateDifficultyStars(rating);
            showNotification(`Â∑≤Â∞ÜÈöæÂ∫¶ËØÑ‰∏∫${rating}Êòü`, 'success');
        }

        // ÊúóËØªÈ¢òÁõÆ
        function readQuestion() {
            if ('speechSynthesis' in window) {
                const question = questions[currentQuestionIndex].content;
                const utterance = new SpeechSynthesisUtterance(question);
                utterance.lang = 'zh-CN';
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            } else {
                showNotification('ÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ÊúóËØª', 'warning');
            }
        }

        // ÈîÆÁõòÂø´Êç∑ÈîÆ
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                // ÈÄâÊã©Á≠îÊ°à
                if (['a', 'A', 'b', 'B', 'c', 'C', 'd', 'D'].includes(e.key)) {
                    const optionIndex = e.key.toUpperCase().charCodeAt(0) - 65;
                    const options = document.querySelectorAll('.option');
                    if (options[optionIndex] && !userAnswers[currentQuestionIndex]) {
                        selectOption(options[optionIndex], e.key.toUpperCase(), e);
                    }
                }
                
                // Êèê‰∫§Á≠îÊ°à
                if (e.key === 'Enter' && selectedOption && !userAnswers[currentQuestionIndex]) {
                    submitAnswer();
                }
                
                // ‰∏ã‰∏ÄÈ¢ò
                if (e.key === ' ' && userAnswers[currentQuestionIndex]) {
                    e.preventDefault();
                    nextQuestion();
                }
                
                // ÂàáÊç¢È¢òÁõÆ
                if (e.key === 'ArrowLeft' && currentQuestionIndex > 0) {
                    jumpToQuestion(currentQuestionIndex - 1);
                }
                if (e.key === 'ArrowRight' && currentQuestionIndex < questions.length - 1) {
                    jumpToQuestion(currentQuestionIndex + 1);
                }
                
                // Ê†áËÆ∞È¢òÁõÆ
                if (e.key === 'm' || e.key === 'M') {
                    markQuestion();
                }
                
                // Ë∑≥ËøáÈ¢òÁõÆ
                if (e.key === 's' || e.key === 'S') {
                    skipQuestion();
                }
            });
        }

        // ÊòæÁ§∫ÈÄöÁü•
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            notification.innerHTML = `
                <span>${icons[type]}</span>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Ëá™Âä®Ê∂àÂ§±
            setTimeout(() => {
                notification.style.animation = 'notificationSlideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ËøîÂõûÈ°∂ÈÉ®
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // ÊâìÂºÄËÆæÁΩÆ
        function openSettings() {
            showNotification('ËÆæÁΩÆÂäüËÉΩÂºÄÂèë‰∏≠...', 'info');
        }

        // ÊòæÁ§∫Â∏ÆÂä©
        function showHelp() {
            const helpText = `Âø´Êç∑ÈîÆËØ¥ÊòéÔºö
A/B/C/D - ÈÄâÊã©Á≠îÊ°à
Enter - Êèê‰∫§Á≠îÊ°à
Space - ‰∏ã‰∏ÄÈ¢ò
‚Üê/‚Üí - ÂàáÊç¢È¢òÁõÆ
M - Ê†áËÆ∞È¢òÁõÆ
S - Ë∑≥ËøáÈ¢òÁõÆ`;
            
            showNotification(helpText, 'info');
        }

        // Ê†áÈ¢òÂä®Áîª
        function playTitleAnimation() {
            const title = document.querySelector('header h1');
            title.style.animation = 'none';
            setTimeout(() => {
                title.style.animation = 'titleBounce 0.6s ease';
            }, 10);
        }

        // Ê∑ªÂä†Âä®ÁîªÊ†∑Âºè
        const style = document.createElement('style');
        style.textContent = `
            @keyframes notificationSlideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
            
            @keyframes titleBounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-10px); }
                60% { transform: translateY(-5px); }
            }
            
            .ripple {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.6);
                transform: scale(0);
                animation: ripple-effect 0.6s ease-out;
            }
            
            @keyframes ripple-effect {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // ÂàùÂßãÂåñÂ∫îÁî®
        init();
    </script>
</body>
</html>



							<script>
                            	
        // È¢òÂ∫ìÊï∞ÊçÆ
        const questionBank = {
            math: [
                {
                    id: 1,
                    content: "Â∑≤Áü•ÂáΩÊï∞ f(x) = x¬≥ - 3x¬≤ + 2ÔºåÊ±Ç f'(x) Âú® x = 1 Â§ÑÁöÑÂØºÊï∞ÂÄº„ÄÇ",
                    options: ["-3", "-2", "0", "3"],
                    correct: "A",
                    explanation: "È¶ñÂÖàÊ±ÇÂØºÔºöf'(x) = 3x¬≤ - 6x<br>‰ª£ÂÖ• x = 1Ôºöf'(1) = 3(1)¬≤ - 6(1) = 3 - 6 = -3<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 3,
                    tags: ["ÂØºÊï∞", "ÂáΩÊï∞", "ËÆ°ÁÆó"]
                },
                {
                    id: 2,
                    content: "ËÆ°ÁÆóÂÆöÁßØÂàÜ ‚à´‚ÇÄ¬π x¬≤ dx ÁöÑÂÄº„ÄÇ",
                    options: ["1/3", "1/2", "2/3", "1"],
                    correct: "A",
                    explanation: "‚à´‚ÇÄ¬π x¬≤ dx = [x¬≥/3]‚ÇÄ¬π = 1¬≥/3 - 0¬≥/3 = 1/3<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 2,
                    tags: ["ÁßØÂàÜ", "ÂÆöÁßØÂàÜ", "ËÆ°ÁÆó"]
                },
                {
                    id: 3,
                    content: "Áü©Èòµ A = [[2, 1], [1, 2]]ÔºåÊ±Ç A ÁöÑÁâπÂæÅÂÄº„ÄÇ",
                    options: ["1, 3", "2, 2", "0, 4", "1, 1"],
                    correct: "A",
                    explanation: "ÁâπÂæÅÊñπÁ®ãÔºö|A - ŒªI| = 0<br>|2-Œª, 1; 1, 2-Œª| = (2-Œª)¬≤ - 1 = Œª¬≤ - 4Œª + 3 = 0<br>Ëß£ÂæóÔºöŒª = 1 Êàñ Œª = 3<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 4,
                    tags: ["Áü©Èòµ", "ÁâπÂæÅÂÄº", "Á∫øÊÄß‰ª£Êï∞"]
                },
                {
                    id: 4,
                    content: "Ê±ÇÊûÅÈôê lim(x‚Üí0) (sin x / x) ÁöÑÂÄº„ÄÇ",
                    options: ["0", "1", "‚àû", "‰∏çÂ≠òÂú®"],
                    correct: "B",
                    explanation: "ËøôÊòØ‰∏Ä‰∏™ÈáçË¶ÅÊûÅÈôêÔºålim(x‚Üí0) (sin x / x) = 1<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ B„ÄÇ",
                    difficulty: 2,
                    tags: ["ÊûÅÈôê", "ÈáçË¶ÅÊûÅÈôê", "ËÆ°ÁÆó"]
                },
                {
                    id: 5,
                    content: "Â∑≤Áü•ÂêëÈáè a = (1, 2, 3)Ôºåb = (4, 5, 6)ÔºåÊ±Ç a¬∑b ÁöÑÂÄº„ÄÇ",
                    options: ["20", "25", "30", "32"],
                    correct: "D",
                    explanation: "ÁÇπÁßØÂÖ¨ÂºèÔºöa¬∑b = a‚ÇÅb‚ÇÅ + a‚ÇÇb‚ÇÇ + a‚ÇÉb‚ÇÉ<br>a¬∑b = 1√ó4 + 2√ó5 + 3√ó6 = 4 + 10 + 18 = 32<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ D„ÄÇ",
                    difficulty: 1,
                    tags: ["ÂêëÈáè", "ÁÇπÁßØ", "ËÆ°ÁÆó"]
                }
            ],
            english: [
                {
                    id: 6,
                    content: "Choose the correct word to complete the sentence: The weather is ______ today.",
                    options: ["nice", "nicely", "nicer", "nicest"],
                    correct: "A",
                    explanation: "Á≥ªÂä®ËØç be ÂêéÈù¢ÈúÄË¶ÅÂΩ¢ÂÆπËØç‰ΩúË°®ËØ≠Ôºånice ÊòØÂΩ¢ÂÆπËØçÔºånicely ÊòØÂâØËØç„ÄÇ<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 1,
                    tags: ["ËØçÊ±á", "ËØ≠Ê≥ï", "ÂΩ¢ÂÆπËØç"]
                },
                {
                    id: 7,
                    content: "Which sentence is grammatically correct?",
                    options: [
                        "She don't like coffee.",
                        "She doesn't like coffee.",
                        "She doesn't likes coffee.",
                        "She don't likes coffee."
                    ],
                    correct: "B",
                    explanation: "Á¨¨‰∏â‰∫∫Áß∞ÂçïÊï∞Áî® doesn'tÔºåÂêéÈù¢Êé•Âä®ËØçÂéüÂΩ¢„ÄÇ<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ B„ÄÇ",
                    difficulty: 2,
                    tags: ["ËØ≠Ê≥ï", "Á¨¨‰∏â‰∫∫Áß∞", "Âä®ËØç"]
                }
            ],
            politics: [
                {
                    id: 8,
                    content: "È©¨ÂÖãÊÄù‰∏ª‰πâÂì≤Â≠¶ÁöÑÊ†∏ÂøÉÊòØÔºàÔºâ„ÄÇ",
                    options: [
                        "Ëæ©ËØÅÂîØÁâ©‰∏ª‰πâ",
                        "ÂéÜÂè≤ÂîØÁâ©‰∏ª‰πâ",
                        "ÂÆûË∑µËÆ∫",
                        "ÁüõÁõæËÆ∫"
                    ],
                    correct: "A",
                    explanation: "È©¨ÂÖãÊÄù‰∏ª‰πâÂì≤Â≠¶ÁöÑÊ†∏ÂøÉÊòØËæ©ËØÅÂîØÁâ©‰∏ª‰πâÂíåÂéÜÂè≤ÂîØÁâ©‰∏ª‰πâÔºåÂÖ∂‰∏≠Ëæ©ËØÅÂîØÁâ©‰∏ª‰πâÊòØÂü∫Á°Ä„ÄÇ<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ A„ÄÇ",
                    difficulty: 2,
                    tags: ["È©¨ÂÖãÊÄù‰∏ª‰πâ", "Âì≤Â≠¶", "Ê†∏ÂøÉ"]
                }
            ],
            professional: [
                {
                    id: 9,
                    content: "ËÆ°ÁÆóÊú∫ÁßëÂ≠¶‰∏≠ÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n¬≤) ÁöÑÁÆóÊ≥ïÊòØÔºàÔºâ„ÄÇ",
                    options: [
                        "‰∫åÂàÜÊü•Êâæ",
                        "Âø´ÈÄüÊéíÂ∫è",
                        "ÂÜíÊ≥°ÊéíÂ∫è",
                        "ÂìàÂ∏åÊü•Êâæ"
                    ],
                    correct: "C",
                    explanation: "ÂÜíÊ≥°ÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n¬≤)ÔºåÊòØÂÖ∏ÂûãÁöÑÂπ≥ÊñπÁ∫ßÁÆóÊ≥ï„ÄÇ<br>Âõ†Ê≠§Ê≠£Á°ÆÁ≠îÊ°àÊòØ C„ÄÇ",
                    difficulty: 3,
                    tags: ["ÁÆóÊ≥ï", "Êó∂Èó¥Â§çÊùÇÂ∫¶", "ÊéíÂ∫è"]
                }
            ]
        };

        // Â∫îÁî®Áä∂ÊÄÅ
        let currentSubject = 'math';
        let currentQuestionIndex = 0;
        let questions = [];
        let userAnswers = [];
        let selectedOption = null;
        let startTime = null;
        let timerInterval = null;
        let questionStartTime = null;
        let questionTimes = [];
        let wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions')) || [];
        let examStats = JSON.parse(localStorage.getItem('examStats')) || {};
        let markedQuestions = JSON.parse(localStorage.getItem('markedQuestions')) || [];
        let isTimerPaused = false;
        let currentFilter = 'all';

        // ÂàùÂßãÂåñ
        function init() {
            createParticles();
            loadQuestions();
            generateNavGrid();
            startTimer();
            updateStats();
            updateWrongBookCount();
            setupKeyboardShortcuts();
            updateProgressRing();
        }

        // ÂàõÂª∫ÊµÆÂä®Á≤íÂ≠ê
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Âä†ËΩΩÈ¢òÁõÆ
        function loadQuestions() {
            questions = [...questionBank[currentSubject]];
            document.getElementById('totalQuestions').textContent = questions.length;
            displayQuestion();
        }

        // ÈÄâÊã©ÁßëÁõÆ
        function selectSubject(subject, event) {
            // Ê∑ªÂä†ÁÇπÂáªÊ≥¢Á∫πÊïàÊûú
            createRipple(event);
            
            currentSubject = subject;
            document.querySelectorAll('.subject-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ÈáçÁΩÆÁä∂ÊÄÅ
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedOption = null;
            questionTimes = [];
            
            loadQuestions();
            generateNavGrid();
            resetTimer();
            updateProgress();
            updateProgressRing();
            
            showNotification(`Â∑≤ÂàáÊç¢Âà∞${getSubjectName(subject)}ÁßëÁõÆ`, 'success');
        }

        // Ëé∑ÂèñÁßëÁõÆÂêçÁß∞
        function getSubjectName(subject) {
            const names = {
                math: 'Êï∞Â≠¶',
                english: 'Ëã±ËØ≠',
                politics: 'ÊîøÊ≤ª',
                professional: '‰∏ì‰∏öËØæ'
            };
            return names[subject] || subject;
        }

        // ÂàõÂª∫ÁÇπÂáªÊ≥¢Á∫πÊïàÊûú
        function createRipple(event) {
            const button = event.currentTarget;
            const ripple = document.createElement('span');
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            button.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 600);
        }

        // ÊòæÁ§∫È¢òÁõÆ
        function displayQuestion() {
            if (currentQuestionIndex >= questions.length) {
                finishExam();
                return;
            }

            const question = questions[currentQuestionIndex];
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('questionContent').textContent = question.content;
            
            // Êõ¥Êñ∞È¢òÁõÆÊ†áÁ≠æ
            updateQuestionBadge();
            
            // ÊòæÁ§∫ÈÄâÈ°π
            const optionsContainer = document.getElementById('questionOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.onclick = (e) => selectOption(optionDiv, String.fromCharCode(65 + index), e);
                
                optionDiv.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionsContainer.appendChild(optionDiv);
            });

            // ÊòæÁ§∫ÈöæÂ∫¶
            updateDifficultyStars(question.difficulty);
            
            // ÈáçÁΩÆÁä∂ÊÄÅ
            selectedOption = null;
            document.getElementById('explanation').classList.remove('show');
            document.querySelector('.submit-btn').style.display = 'inline-block';
            document.querySelector('.next-btn').style.display = 'none';
            
            // Á¶ÅÁî®Â∑≤Á≠îÈ¢òÁõÆÁöÑÈÄâÈ°π
            if (userAnswers[currentQuestionIndex]) {
                disableOptions();
            }
            
            // ËÆ∞ÂΩïÂºÄÂßãÊó∂Èó¥
            questionStartTime = Date.now();
            
            // Êõ¥Êñ∞ÂØºËà™
            updateNavGrid();
            
            // ÊªöÂä®Âà∞È¢òÁõÆÈ°∂ÈÉ®
            document.querySelector('.question-area').scrollIntoView({ behavior: 'smooth' });
        }

        // Êõ¥Êñ∞È¢òÁõÆÊ†áÁ≠æ
        function updateQuestionBadge() {
            const badge = document.getElementById('questionBadge');
            const answer = userAnswers[currentQuestionIndex];
            
            if (answer) {
                if (answer.correct) {
                    badge.textContent = '‚úì Ê≠£Á°Æ';
                    badge.style.background = '#c6f6d5';
                    badge.style.color = '#22543d';
                } else {
                    badge.textContent = '‚úó ÈîôËØØ';
                    badge.style.background = '#fed7d7';
                    badge.style.color = '#742a2a';
                }
            } else if (markedQuestions.includes(currentQuestionIndex)) {
                badge.textContent = '‚≠ê Ê†áËÆ∞';
                badge.style.background = '#fef3c7';
                badge.style.color = '#92400e';
            } else {
                badge.textContent = 'Êñ∞È¢ò';
                badge.style.background = '#e6fffa';
                badge.style.color = '#234e52';
            }
        }

        // Êõ¥Êñ∞ÈöæÂ∫¶ÊòüÁ∫ß
        function updateDifficultyStars(difficulty) {
            const stars = document.querySelectorAll('.difficulty-star');
            stars.forEach((star, index) => {
                if (index < difficulty) {
                    star.style.color = '#ed8936';
                } else {
                    star.style.color = '#e2e8f0';
                }
            });
        }

        // ÈÄâÊã©ÈÄâÈ°π
        function selectOption(element, option, event) {
            if (userAnswers[currentQuestionIndex]) return; // Â∑≤Á≠îÈ¢òÁõÆ‰∏çËÉΩ‰øÆÊîπ
            
            createRipple(event);
            
            // Ê∑ªÂä†ÈÄâÊã©Èü≥ÊïàÊ®°Êãü
            playSelectSound();
            
            // Ê∏ÖÈô§‰πãÂâçÁöÑÈÄâÊã©
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Ê†áËÆ∞ÂΩìÂâçÈÄâÊã©
            element.classList.add('selected');
            selectedOption = option;
            
            // Ëá™Âä®Êèê‰∫§ÈÄâÈ°π
            if (localStorage.getItem('autoSubmit') === 'true') {
                setTimeout(() => submitAnswer(), 500);
            }
        }

        // Ê®°ÊãüÈÄâÊã©Èü≥Êïà
        function playSelectSound() {
            // ‰ΩøÁî® Web Audio API ÂàõÂª∫ÁÆÄÂçïÁöÑÈü≥Êïà
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            gainNode.gain.value = 0.1;
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        // Êèê‰∫§Á≠îÊ°à
        function submitAnswer() {
            if (!selectedOption) {
                showNotification('ËØ∑ÈÄâÊã©‰∏Ä‰∏™Á≠îÊ°à', 'warning');
                // ÈúáÂä®ÊèêÁ§∫
                if (navigator.vibrate) {
                    navigator.vibrate([200, 100, 200]);
                }
                return;
            }

            const question = questions[currentQuestionIndex];
            const isCorrect = selectedOption === question.correct;
            
            // ËÆ∞ÂΩïÁ≠îÊ°à
            userAnswers[currentQuestionIndex] = {
                answer: selectedOption,
                correct: isCorrect,
                time: Math.floor((Date.now() - questionStartTime) / 1000)
            };
            
            questionTimes.push(userAnswers[currentQuestionIndex].time);
            
            // ÊòæÁ§∫Ê≠£Á°ÆÁ≠îÊ°àÂíåËß£Êûê
            showAnswerResult(isCorrect);
            
            // Êõ¥Êñ∞ÁªüËÆ°
            updateExamStats(isCorrect);
            
            // Â¶ÇÊûúÁ≠îÈîôÔºåÂä†ÂÖ•ÈîôÈ¢òÊú¨
            if (!isCorrect) {
                addToWrongBook(currentQuestionIndex);
                playWrongSound();
            } else {
                playCorrectSound();
            }
            
            // Êõ¥Êñ∞ËøõÂ∫¶
            updateProgress();
            updateProgressRing();
            updateNavGrid();
        }

        // Êí≠ÊîæÊ≠£Á°ÆÈü≥Êïà
        function playCorrectSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 1000;
            gainNode.gain.value = 0.1;
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.2);
            
            // ÊòæÁ§∫Ê≠£Á°ÆÁâπÊïà
            showAnswerEffect('‚úÖ');
        }

        // Êí≠ÊîæÈîôËØØÈü≥Êïà
        function playWrongSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 300;
            gainNode.gain.value = 0.1;
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.3);
            
            // ÊòæÁ§∫ÈîôËØØÁâπÊïà
            showAnswerEffect('‚ùå');
        }

        // ÊòæÁ§∫Á≠îÈ¢òÁâπÊïà
        function showAnswerEffect(emoji) {
            const effect = document.createElement('div');
            effect.className = 'answer-effect';
            effect.textContent = emoji;
            document.body.appendChild(effect);
            
            setTimeout(() => effect.remove(), 1000);
        }

        // ÊòæÁ§∫Á≠îÊ°àÁªìÊûú
        function showAnswerResult(isCorrect) {
            const question = questions[currentQuestionIndex];
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, index) => {
                const optionLetter = String.fromCharCode(65 + index);
                option.onclick = null; // Á¶ÅÁî®ÁÇπÂáª
                
                setTimeout(() => {
                    if (optionLetter === question.correct) {
                        option.classList.add('correct');
                    } else if (optionLetter === selectedOption && selectedOption !== question.correct) {
                        option.classList.add('incorrect');
                    }
                }, 100);
            });
            
            // ÊòæÁ§∫Ëß£Êûê
            setTimeout(() => {
                document.getElementById('explanationContent').innerHTML = question.explanation;
                document.getElementById('explanation').classList.add('show');
            }, 500);
            
            // ÂàáÊç¢ÊåâÈíÆ
            setTimeout(() => {
                document.querySelector('.submit-btn').style.display = 'none';
                document.querySelector('.next-btn').style.display = 'inline-block';
            }, 1000);
            
            // Êõ¥Êñ∞È¢òÁõÆÊ†áÁ≠æ
            updateQuestionBadge();
        }

        // ‰∏ã‰∏ÄÈ¢ò
        function nextQuestion() {
            // Ê∑ªÂä†ÂàáÊç¢Âä®Áîª
            const questionArea = document.querySelector('.question-area');
            questionArea.style.opacity = '0';
            questionArea.style.transform = 'translateX(50px)';
            
            setTimeout(() => {
                currentQuestionIndex++;
                displayQuestion();
                questionArea.style.opacity = '1';
                questionArea.style.transform = 'translateX(0)';
            }, 300);
        }

        // Ë∑≥ËøáÈ¢òÁõÆ
        function skipQuestion() {
            userAnswers[currentQuestionIndex] = {
                answer: null,
                correct: false,
                skipped: true,
                time: Math.floor((Date.now() - questionStartTime) / 1000)
            };
            
            questionTimes.push(userAnswers[currentQuestionIndex].time);
            
            // Ê†áËÆ∞‰∏∫Ë∑≥Ëøá
            const navItem = document.querySelectorAll('.nav-item')[currentQuestionIndex];
            navItem.classList.add('skipped');
            
            showNotification('È¢òÁõÆÂ∑≤Ë∑≥Ëøá', 'info');
            
            // Êõ¥Êñ∞ËøõÂ∫¶
            updateProgress();
            updateProgressRing();
            
            // ‰∏ã‰∏ÄÈ¢ò
            currentQuestionIndex++;
            displayQuestion();
        }

        // Ê†áËÆ∞È¢òÁõÆ
        function markQuestion() {
            const index = markedQuestions.indexOf(currentQuestionIndex);
            if (index > -1) {
                markedQuestions.splice(index, 1);
                showNotification('Â∑≤ÂèñÊ∂àÊ†áËÆ∞', 'info');
            } else {
                markedQuestions.push(currentQuestionIndex);
                showNotification('Â∑≤Ê†áËÆ∞È¢òÁõÆ', 'success');
            }
            
            localStorage.setItem('markedQuestions', JSON.stringify(markedQuestions));
            updateQuestionBadge();
        }

        // ÂàáÊç¢Ëß£ÊûêÊòæÁ§∫
        function toggleExplanation() {
            const explanation = document.getElementById('explanation');
            explanation.classList.toggle('show');
        }

        // ÁîüÊàêÈ¢òÁõÆÂØºËà™
        function generateNavGrid() {
            const navGrid = document.getElementById('navGrid');
            navGrid.innerHTML = '';
            
            questions.forEach((question, index) => {
                const navItem = document.createElement('div');
                navItem.className = 'nav-item';
                navItem.textContent = index + 1;
                navItem.onclick = () => jumpToQuestion(index);
                
                // Ê∑ªÂä†È¢òÁõÆÁ±ªÂûãÊ†áËÆ∞
                if (markedQuestions.includes(index)) {
                    navItem.title = 'Â∑≤Ê†áËÆ∞';
                }
                
                navGrid.appendChild(navItem);
            });
        }

        // Êõ¥Êñ∞È¢òÁõÆÂØºËà™
        function updateNavGrid() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach((item, index) => {
                item.classList.remove('current', 'answered', 'skipped');
                
                if (index === currentQuestionIndex) {
                    item.classList.add('current');
                } else if (userAnswers[index]) {
                    if (userAnswers[index].skipped) {
                        item.classList.add('skipped');
                    } else {
                        item.classList.add('answered');
                    }
                }
            });
            
            // Â∫îÁî®ËøáÊª§Âô®
            applyQuestionFilter();
        }

        // Â∫îÁî®È¢òÁõÆËøáÊª§Âô®
        function applyQuestionFilter() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach((item, index) => {
                switch(currentFilter) {
                    case 'answered':
                        if (!userAnswers[index] || userAnswers[index].skipped) {
                            item.style.display = 'none';
                        } else {
                            item.style.display = 'flex';
                        }
                        break;
                    case 'skipped':
                        if (!userAnswers[index] || !userAnswers[index].skipped) {
                            item.style.display = 'none';
                        } else {
                            item.style.display = 'flex';
                        }
                        break;
                    default:
                        item.style.display = 'flex';
                }
            });
        }

        // ËøáÊª§È¢òÁõÆ
        function filterQuestions(filter, event) {
            currentFilter = filter;
            
            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.nav-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Â∫îÁî®ËøáÊª§
            applyQuestionFilter();
        }

        // Ë∑≥ËΩ¨Âà∞ÊåáÂÆöÈ¢òÁõÆ
        function jumpToQuestion(index) {
            if (index >= 0 && index < questions.length) {
                // Ê∑ªÂä†Ë∑≥ËΩ¨Âä®Áîª
                const navItem = document.querySelectorAll('.nav-item')[index];
                navItem.style.transform = 'scale(1.3)';
                
                setTimeout(() => {
                    currentQuestionIndex = index;
                    displayQuestion();
                    navItem.style.transform = 'scale(1)';
                }, 200);
            }
        }

        // Êõ¥Êñ∞ËøõÂ∫¶
        function updateProgress() {
            const answered = userAnswers.filter(answer => answer !== undefined).length;
            const total = questions.length;
            const percentage = Math.round((answered / total) * 100);
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressFill').textContent = percentage + '%';
            document.getElementById('answeredCount').textContent = answered;
            document.getElementById('remainingCount').textContent = total - answered;
        }

        // Êõ¥Êñ∞ËøõÂ∫¶ÁéØ
        function updateProgressRing() {
            const answered = userAnswers.filter(answer => answer !== undefined).length;
            const total = questions.length;
            const percentage = answered / total;
            const circumference = 2 * Math.PI * 32;
            const offset = circumference - (percentage * circumference);
            
            const progressRing = document.querySelector('.progress-ring-progress');
            progressRing.style.strokeDashoffset = offset;
            document.getElementById('progressRingText').textContent = Math.round(percentage * 100) + '%';
        }

        // ÂàáÊç¢ËÆ°Êó∂Âô®
        function toggleTimer() {
            isTimerPaused = !isTimerPaused;
            
            if (isTimerPaused) {
                clearInterval(timerInterval);
                showNotification('ËÆ°Êó∂Âô®Â∑≤ÊöÇÂÅú', 'info');
            } else {
                startTimer();
                showNotification('ËÆ°Êó∂Âô®Â∑≤ÊÅ¢Â§ç', 'success');
            }
        }

        // ËÆ°Êó∂Âô®
        function startTimer() {
            if (!startTime) {
                startTime = Date.now();
            }
            
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            if (!startTime) return;
            
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            startTime = Date.now();
            isTimerPaused = false;
            startTimer();
        }

        // Êõ¥Êñ∞ËÄÉËØïÁªüËÆ°
        function updateExamStats(isCorrect) {
            if (!examStats[currentSubject]) {
                examStats[currentSubject] = {
                    total: 0,
                    correct: 0,
                    totalTime: 0,
                    streak: 0,
                    maxStreak: 0
                };
            }
            
            const stats = examStats[currentSubject];
            stats.total++;
            stats.totalTime += questionTimes[questionTimes.length - 1];
            
            if (isCorrect) {
                stats.correct++;
                stats.streak++;
                stats.maxStreak = Math.max(stats.maxStreak, stats.streak);
                
                // ËøûÁª≠Ê≠£Á°ÆÂ•ñÂä±
                if (stats.streak % 5 === 0) {
                    showNotification(`Â§™Ê£í‰∫ÜÔºÅËøûÁª≠Á≠îÂØπ${stats.streak}È¢òÔºÅüéâ`, 'success');
                }
            } else {
                stats.streak = 0;
            }
            
            localStorage.setItem('examStats', JSON.stringify(examStats));
            updateStats();
        }

        // Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆÊòæÁ§∫
        function updateStats() {
            const stats = examStats[currentSubject] || { total: 0, correct: 0, totalTime: 0, streak: 0, maxStreak: 0 };
            
            const accuracy = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
            const avgTime = stats.total > 0 ? Math.round(stats.totalTime / stats.total) : 0;
            
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('avgTime').textContent = avgTime + 'Áßí';
            document.getElementById('streak').textContent = stats.streak;
            document.getElementById('wrongCount').textContent = wrongQuestions.length;
        }

        // ÊòæÁ§∫ÁªüËÆ°ËØ¶ÊÉÖ
        function showStatsDetail(type, event) {
            createRipple(event);
            
            const messages = {
                accuracy: {
                    title: 'Ê≠£Á°ÆÁéáÂàÜÊûê',
                    content: `‰Ω†ÁöÑÂΩìÂâçÊ≠£Á°ÆÁéáÊòØ${document.getElementById('accuracy').textContent}„ÄÇÂª∫ËÆÆ‰øùÊåÅÂú®80%‰ª•‰∏äÔºå‰Ωé‰∫é60%ÈúÄË¶ÅÂä†Âº∫Âü∫Á°Ä„ÄÇ`
                },
                speed: {
                    title: 'Á≠îÈ¢òÈÄüÂ∫¶',
                    content: `Âπ≥ÂùáÁî®Êó∂${document.getElementById('avgTime').textContent}„ÄÇÁ≠îÈ¢òË¶ÅÂÖºÈ°æÂáÜÁ°ÆÁéáÔºå‰∏çË¶Å‰∏∫‰∫ÜÂø´ËÄåÁâ∫Áâ≤Ë¥®Èáè„ÄÇ`
                },
                streak: {
                    title: 'ËøûÁª≠Ê≠£Á°Æ',
                    content: `ËøûÁª≠Á≠îÂØπ${document.getElementById('streak').textContent}È¢òÔºÅ‰øùÊåÅËøô‰∏™Áä∂ÊÄÅÔºå‰Ω†Ë∂äÊù•Ë∂äÊ£í‰∫ÜÔºÅ`
                },
                wrong: {
                    title: 'ÈîôÈ¢òÁªüËÆ°',
                    content: `ÂÖ±Êúâ${document.getElementById('wrongCount').textContent}ÈÅìÈîôÈ¢ò„ÄÇÈîôÈ¢òÊòØËøõÊ≠•ÁöÑÈò∂Ê¢ØÔºåËÆ∞ÂæóÂÆöÊúüÂ§ç‰π†„ÄÇ`
                }
            };
            
            const detail = messages[type];
            showNotification(`${detail.title}Ôºö${detail.content}`, 'info');
        }

        // Ê∑ªÂä†Âà∞ÈîôÈ¢òÊú¨
        function addToWrongBook(questionIndex) {
            const question = questions[questionIndex];
            const wrongQuestion = {
                ...question,
                subject: currentSubject,
                wrongAnswer: selectedOption,
                wrongTime: new Date().toISOString()
            };
            
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤Â≠òÂú®
            const exists = wrongQuestions.some(q => q.id === wrongQuestion.id);
            if (!exists) {
                wrongQuestions.push(wrongQuestion);
                localStorage.setItem('wrongQuestions', JSON.stringify(wrongQuestions));
                updateWrongBookCount();
            }
        }

        // Êõ¥Êñ∞ÈîôÈ¢òÊú¨Êï∞Èáè
        function updateWrongBookCount() {
            const count = document.getElementById('wrongBookCount');
            count.textContent = wrongQuestions.length;
            
            // Ê∑ªÂä†Âä®ÁîªÊïàÊûú
            count.style.transform = 'scale(1.3)';
            setTimeout(() => {
                count.style.transform = 'scale(1)';
            }, 300);
        }

        // ÊâìÂºÄÈîôÈ¢òÊú¨
        function openWrongBook() {
            if (wrongQuestions.length === 0) {
                showNotification('ÈîôÈ¢òÊú¨‰∏∫Á©∫ÔºåÁªßÁª≠Âä†Ê≤πÔºÅ', 'info');
                return;
            }
            
            // ÊåâÁßëÁõÆÂàÜÁªÑÊòæÁ§∫ÈîôÈ¢ò
            const wrongBySubject = {};
            wrongQuestions.forEach(q => {
                if (!wrongBySubject[q.subject]) {
                    wrongBySubject[q.subject] = [];
                }
                wrongBySubject[q.subject].push(q);
            });
            
            let message = `ÈîôÈ¢òÊú¨ÂÖ±Êúâ${wrongQuestions.length}ÈÅìÈ¢òÔºö\n`;
            for (const [subject, questions] of Object.entries(wrongBySubject)) {
                message += `\n${getSubjectName(subject)}Ôºö${questions.length}ÈÅì`;
            }
            
            showNotification(message, 'warning');
        }

        // ÊòæÁ§∫ËøõÂ∫¶ËØ¶ÊÉÖ
        function showProgressDetail() {
            const answered = userAnswers.filter(answer => answer !== undefined).length;
            const total = questions.length;
            const remaining = total - answered;
            
            showNotification(`Â∑≤ÂÆåÊàê${answered}È¢òÔºåÂâ©‰Ωô${remaining}È¢òÔºåÂä†Ê≤πÔºÅ`, 'info');
        }

        // ÊòæÁ§∫Â∑≤Á≠îÈ¢òËØ¶ÊÉÖ
        function showAnsweredDetail() {
            const answered = userAnswers.filter(answer => answer && !answer.skipped);
            const correct = answered.filter(a => a.correct).length;
            
            showNotification(`Â∑≤Á≠î${answered.length}È¢òÔºåÊ≠£Á°Æ${correct}È¢ò`, 'success');
        }

        // ÊòæÁ§∫Ââ©‰ΩôÈ¢òËØ¶ÊÉÖ
        function showRemainingDetail() {
            const remaining = questions.length - userAnswers.filter(answer => answer !== undefined).length;
            
            showNotification(`ËøòÊúâ${remaining}È¢òÂæÖÂÆåÊàêÔºåÁªßÁª≠Âä†Ê≤πÔºÅ`, 'info');
        }

        // ÂÆåÊàêËÄÉËØï
        function finishExam() {
            clearInterval(timerInterval);
            
            const correct = userAnswers.filter(answer => answer && answer.correct).length;
            const total = userAnswers.filter(answer => answer !== undefined).length;
            const accuracy = total > 0 ? Math.round((correct / total) * 100) : 0;
            const totalTime = Math.floor((Date.now() - startTime) / 1000);
            
            // ‰øùÂ≠òÊú¨Ê¨°ËÄÉËØïËÆ∞ÂΩï
            const examRecord = {
                subject: currentSubject,
                date: new Date().toISOString(),
                total: total,
                correct: correct,
                accuracy: accuracy,
                time: totalTime
            };
            
            let examHistory = JSON.parse(localStorage.getItem('examHistory')) || [];
            examHistory.push(examRecord);
            localStorage.setItem('examHistory', JSON.stringify(examHistory));
            
            // ÊòæÁ§∫ÁªìÊûú
            document.getElementById('finalAccuracy').textContent = accuracy + '%';
            document.getElementById('finalTime').textContent = formatTime(totalTime);
            document.getElementById('finalCorrect').textContent = correct;
            document.getElementById('finalWrong').textContent = total - correct;
            
            // Êí≠ÊîæÂÆåÊàêÈü≥Êïà
            playFinishSound();
            
            setTimeout(() => {
                document.getElementById('resultModal').style.display = 'flex';
            }, 500);
        }

        // Êí≠ÊîæÂÆåÊàêÈü≥Êïà
        function playFinishSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const notes = [523, 659, 784, 1047]; // C, E, G, C
            
            notes.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = freq;
                gainNode.gain.value = 0.1;
                
                oscillator.start(audioContext.currentTime + index * 0.15);
                oscillator.stop(audioContext.currentTime + index * 0.15 + 0.2);
            });
        }

        // Ê†ºÂºèÂåñÊó∂Èó¥
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${minutes}:${secs.toString().padStart(2, '0')}`;
        }

        // ÊòæÁ§∫ÂàÜÊûê
        function showAnalysis() {
            showNotification('ËØ¶ÁªÜÂàÜÊûêÂäüËÉΩÂºÄÂèë‰∏≠...', 'info');
        }

        // ÈáçÊñ∞ÂºÄÂßã
        function restartExam() {
            document.getElementById('resultModal').style.display = 'none';
            
            // ÈáçÁΩÆÁä∂ÊÄÅ
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedOption = null;
            questionTimes = [];
            
            loadQuestions();
            generateNavGrid();
            resetTimer();
            updateProgress();
            updateProgressRing();
            
            showNotification('ËÄÉËØïÂ∑≤ÈáçÊñ∞ÂºÄÂßãÔºåÂä†Ê≤πÔºÅ', 'success');
        }

        // ÊòæÁ§∫ÁªìÊûúËØ¶ÊÉÖ
        function showResultDetail(type) {
            const messages = {
                accuracy: '‰Ω†ÁöÑÊ≠£Á°ÆÁéáÂèçÊò†‰∫ÜÁü•ËØÜÁöÑÊéåÊè°Á®ãÂ∫¶',
                time: 'ÊÄªÁî®Êó∂‰ΩìÁé∞‰∫Ü‰Ω†ÁöÑÁ≠îÈ¢òÊïàÁéá',
                correct: 'ÊØèÈÅìÊ≠£Á°ÆÁöÑÈ¢òÁõÆÈÉΩÊòØ‰Ω†ÁöÑËøõÊ≠•',
                wrong: 'ÈîôÈ¢òÊåáÊòé‰∫ÜÈúÄË¶ÅÂä†Âº∫ÁöÑÊñπÂêë'
            };
            
            showNotification(messages[type], 'info');
        }

        // ÈöæÂ∫¶ËØÑÂàÜ
        function rateDifficulty(rating) {
            const question = questions[currentQuestionIndex];
            question.difficulty = rating;
            
            // ‰øùÂ≠òËØÑÂàÜ
            let difficultyRatings = JSON.parse(localStorage.getItem('difficultyRatings')) || {};
            if (!difficultyRatings[currentSubject]) {
                difficultyRatings[currentSubject] = {};
            }
            difficultyRatings[currentSubject][question.id] = rating;
            localStorage.setItem('difficultyRatings', JSON.stringify(difficultyRatings));
            
            updateDifficultyStars(rating);
            showNotification(`Â∑≤Â∞ÜÈöæÂ∫¶ËØÑ‰∏∫${rating}Êòü`, 'success');
        }

        // ÊúóËØªÈ¢òÁõÆ
        function readQuestion() {
            if ('speechSynthesis' in window) {
                const question = questions[currentQuestionIndex].content;
                const utterance = new SpeechSynthesisUtterance(question);
                utterance.lang = 'zh-CN';
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            } else {
                showNotification('ÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ÊúóËØª', 'warning');
            }
        }

        // ÈîÆÁõòÂø´Êç∑ÈîÆ
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                // ÈÄâÊã©Á≠îÊ°à
                if (['a', 'A', 'b', 'B', 'c', 'C', 'd', 'D'].includes(e.key)) {
                    const optionIndex = e.key.toUpperCase().charCodeAt(0) - 65;
                    const options = document.querySelectorAll('.option');
                    if (options[optionIndex] && !userAnswers[currentQuestionIndex]) {
                        selectOption(options[optionIndex], e.key.toUpperCase(), e);
                    }
                }
                
                // Êèê‰∫§Á≠îÊ°à
                if (e.key === 'Enter' && selectedOption && !userAnswers[currentQuestionIndex]) {
                    submitAnswer();
                }
                
                // ‰∏ã‰∏ÄÈ¢ò
                if (e.key === ' ' && userAnswers[currentQuestionIndex]) {
                    e.preventDefault();
                    nextQuestion();
                }
                
                // ÂàáÊç¢È¢òÁõÆ
                if (e.key === 'ArrowLeft' && currentQuestionIndex > 0) {
                    jumpToQuestion(currentQuestionIndex - 1);
                }
                if (e.key === 'ArrowRight' && currentQuestionIndex < questions.length - 1) {
                    jumpToQuestion(currentQuestionIndex + 1);
                }
                
                // Ê†áËÆ∞È¢òÁõÆ
                if (e.key === 'm' || e.key === 'M') {
                    markQuestion();
                }
                
                // Ë∑≥ËøáÈ¢òÁõÆ
                if (e.key === 's' || e.key === 'S') {
                    skipQuestion();
                }
            });
        }

        // ÊòæÁ§∫ÈÄöÁü•
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            notification.innerHTML = `
                <span>${icons[type]}</span>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Ëá™Âä®Ê∂àÂ§±
            setTimeout(() => {
                notification.style.animation = 'notificationSlideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ËøîÂõûÈ°∂ÈÉ®
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // ÊâìÂºÄËÆæÁΩÆ
        function openSettings() {
            showNotification('ËÆæÁΩÆÂäüËÉΩÂºÄÂèë‰∏≠...', 'info');
        }

        // ÊòæÁ§∫Â∏ÆÂä©
        function showHelp() {
            const helpText = `Âø´Êç∑ÈîÆËØ¥ÊòéÔºö
A/B/C/D - ÈÄâÊã©Á≠îÊ°à
Enter - Êèê‰∫§Á≠îÊ°à
Space - ‰∏ã‰∏ÄÈ¢ò
‚Üê/‚Üí - ÂàáÊç¢È¢òÁõÆ
M - Ê†áËÆ∞È¢òÁõÆ
S - Ë∑≥ËøáÈ¢òÁõÆ`;
            
            showNotification(helpText, 'info');
        }

        // Ê†áÈ¢òÂä®Áîª
        function playTitleAnimation() {
            const title = document.querySelector('header h1');
            title.style.animation = 'none';
            setTimeout(() => {
                title.style.animation = 'titleBounce 0.6s ease';
            }, 10);
        }

        // Ê∑ªÂä†Âä®ÁîªÊ†∑Âºè
        const style = document.createElement('style');
        style.textContent = `
            @keyframes notificationSlideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
            
            @keyframes titleBounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-10px); }
                60% { transform: translateY(-5px); }
            }
            
            .ripple {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.6);
                transform: scale(0);
                animation: ripple-effect 0.6s ease-out;
            }
            
            @keyframes ripple-effect {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // ÂàùÂßãÂåñÂ∫îÁî®
        init();
    

							</script>
                        </body>
                        </html>
                    
